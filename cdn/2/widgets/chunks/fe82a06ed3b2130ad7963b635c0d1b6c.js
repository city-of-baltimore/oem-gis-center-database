"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_core_views_interactive_snapping_featureSources_featureServiceSour-477f9e"],{

/***/ "./node_modules/@arcgis/core/core/AsyncSequence.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/core/AsyncSequence.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AsyncSequence": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let r=class extends _Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(){super(...arguments),this.updating=!1,this._pending=[]}push(s,t){this._pending.push({promise:s,callback:t}),1===this._pending.length&&this._process()}_process(){if(!this._pending.length)return void(this.updating=!1);this.updating=!0;const s=this._pending[0];s.promise.then((t=>s.callback(t))).catch((()=>{})).then((()=>{this._pending.shift(),this._process()}))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],r.prototype,"updating",void 0),r=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_3__.subclass)("esri.core.AsyncSequence")],r);


/***/ }),

/***/ "./node_modules/@arcgis/core/core/ByteSizeUnit.js":
/*!********************************************************!*\
  !*** ./node_modules/@arcgis/core/core/ByteSizeUnit.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ByteSizeUnit": () => (/* binding */ E)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
var E;!function(E){E[E.KILOBYTES=1024]="KILOBYTES",E[E.MEGABYTES=1048576]="MEGABYTES",E[E.GIGABYTES=1073741824]="GIGABYTES"}(E||(E={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/core/byteSizeEstimations.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/byteSizeEstimations.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "estimateAttributesObjectSize": () => (/* binding */ t),
/* harmony export */   "estimateFixedArraySize": () => (/* binding */ c),
/* harmony export */   "estimateNestedObjectSize": () => (/* binding */ e),
/* harmony export */   "estimateNumberByteSize": () => (/* binding */ n),
/* harmony export */   "estimateStringByteSize": () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function r(r){return 32+r.length}function n(r){return 16}function t(t){if(!t)return 0;let e=f;for(const o in t)if(t.hasOwnProperty(o)){const u=t[o];switch(typeof u){case"string":e+=r(u);break;case"number":e+=n();break;case"boolean":e+=4}}return e}function e(r){if(!r)return 0;if(Array.isArray(r))return o(r);let n=f;for(const t in r)r.hasOwnProperty(t)&&(n+=u(r[t]));return n}function o(r){const n=r.length;if(0===n||"number"==typeof r[0])return 32+8*n;let t=i;for(let e=0;e<n;e++)t+=u(r[e]);return t}function u(t){switch(typeof t){case"object":return e(t);case"string":return r(t);case"number":return n();case"boolean":return 4;default:return 8}}function c(r,n){return i+r.length*n}const f=32,i=32;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/LOD.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/LOD.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/JSONSupport.js */ "./node_modules/@arcgis/core/core/JSONSupport.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
var i;let l=i=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__.JSONSupport{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new i({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"cols",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({type:_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__.Integer,json:{write:!0}})],l.prototype,"level",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({type:String,json:{write:!0}})],l.prototype,"levelValue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"origin",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({type:Number,json:{write:!0}})],l.prototype,"resolution",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"rows",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({type:Number,json:{write:!0}})],l.prototype,"scale",void 0),l=i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.layers.support.LOD")],l);const p=l;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/TileInfo.js":
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/TileInfo.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ j)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/jsonMap.js */ "./node_modules/@arcgis/core/core/jsonMap.js");
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/JSONSupport.js */ "./node_modules/@arcgis/core/core/JSONSupport.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/reader.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/writer.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js");
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../geometry/Point.js */ "./node_modules/@arcgis/core/geometry/Point.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../geometry/support/webMercatorUtils.js */ "./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js");
/* harmony import */ var _LOD_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./LOD.js */ "./node_modules/@arcgis/core/layers/support/LOD.js");
/* harmony import */ var _TileKey_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./TileKey.js */ "./node_modules/@arcgis/core/layers/support/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
var w;const x=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let O=w=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.JSONSupport{static create(e={}){const{resolutionFactor:t=1,scales:o,size:s=256,spatialReference:i=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_12__["default"].WebMercator,numLODs:l=24}=e;if(!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.isValid)(i)){const e=[];if(o)for(let t=0;t<o.length;t++){const r=o[t];e.push(new _LOD_js__WEBPACK_IMPORTED_MODULE_16__["default"]({level:t,scale:r,resolution:r}))}else{let t=5e-4;for(let o=l-1;o>=0;o--)e.unshift(new _LOD_js__WEBPACK_IMPORTED_MODULE_16__["default"]({level:o,scale:t,resolution:t})),t*=2}return new w({dpi:96,lods:e,origin:new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_11__["default"](0,0,i),size:[s,s],spatialReference:i})}const n=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.getInfo)(i),a=e.origin?new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_11__["default"]({x:e.origin.x,y:e.origin.y,spatialReference:i}):new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_11__["default"](n?{x:n.origin[0],y:n.origin[1],spatialReference:i}:{x:0,y:0,spatialReference:i}),u=96,d=1/((0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__.getMetersPerUnitForSR)(i)*39.37*u),g=[];if(o)for(let r=0;r<o.length;r++){const e=o[r],t=e*d;g.push(new _LOD_js__WEBPACK_IMPORTED_MODULE_16__["default"]({level:r,scale:e,resolution:t}))}else{let e=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.isGeographic)(i)?512/s*591657527.5917094:256/s*591657527.591555;const o=Math.ceil(l/t);g.push(new _LOD_js__WEBPACK_IMPORTED_MODULE_16__["default"]({level:0,scale:e,resolution:e*d}));for(let r=1;r<o;r++){const o=e/2**t,s=o*d;g.push(new _LOD_js__WEBPACK_IMPORTED_MODULE_16__["default"]({level:r,scale:o,resolution:s})),e=o}}return new w({dpi:u,lods:g,origin:a,size:[s,s],spatialReference:i})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const o=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.getInfo)(e);return e.isWrappable&&!!o&&Math.abs(o.origin[0]-t.x)<=o.dx}return!1}readOrigin(e,t){return _geometry_Point_js__WEBPACK_IMPORTED_MODULE_11__["default"].fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,o=0;const r=[],s=this._levelToLOD={};e&&(t=-1/0,o=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,o=e.scale<o?e.scale:o,s[e.level]=e}))),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const o=Math.floor(e),r=o+1;return t[o]/(t[o]/t[r])**(e-o)}scaleToZoom(e){const t=this.scales,o=t.length-1;let r=0;for(;r<o;r++){const o=t[r],s=t[r+1];if(o<=e)return r;if(s===e)return r+1;if(o>e&&s<e)return r+Math.log(o/e)/Math.log(o/s)}return r}snapScale(e,t=.95){const o=this.scaleToZoom(e);return o%Math.floor(o)>=t?this.zoomToScale(Math.ceil(o)):this.zoomToScale(Math.floor(o))}tileAt(e,t,o,r){const s=this.lodAt(e);if(!s)return null;let i,l;if("number"==typeof t)i=t,l=o;else if((0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.equals)(t.spatialReference,this.spatialReference))i=t.x,l=t.y,r=o;else{const e=(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_15__.project)(t,this.spatialReference);if(null==e)return null;i=e.x,l=e.y,r=o}const n=s.resolution*this.size[0],a=s.resolution*this.size[1];return r||(r=new _TileKey_js__WEBPACK_IMPORTED_MODULE_17__.TileKey(null,0,0,0,(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_13__.create)())),r.level=e,r.row=Math.floor((this.origin.y-l)/a+.001),r.col=Math.floor((i-this.origin.x)/n+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=w.ExtrapolateOptions.NONE){let o=this.lodAt(e.level);if(!o&&t===w.ExtrapolateOptions.POWER_OF_TWO){const t=this.lods[this.lods.length-1];t.level<e.level&&(o=t)}if(!o)return;const r=e.level-o.level,s=o.resolution*this.size[0]/2**r,i=o.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_13__.create)()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*i,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+i}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const o=this.lodAt(t.level);if(null==o)return null;const{resolution:r}=o,s=r*this.size[0],i=r*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*i,e[2]=e[0]+s,e[3]=e[1]+i,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return w.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(256===this.size[0]&&256===this.size[1])return 256===e?this:null;const o=[],r=this.lods.length;for(let s=0;s<r;s++){const e=this.lods[s],r=e.resolution*t;o.push(new _LOD_js__WEBPACK_IMPORTED_MODULE_16__["default"]({level:e.level,scale:e.scale,resolution:r}))}return new w({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:o})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let o=0;o<e.length;o++){const r=e[o];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number,json:{write:!0}})],O.prototype,"compressionQuality",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number,json:{write:!0}})],O.prototype,"dpi",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:String,json:{read:x.read,write:x.write,origins:{"web-scene":{read:!1,write:!1}}}})],O.prototype,"format",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],O.prototype,"isWrappable",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:_geometry_Point_js__WEBPACK_IMPORTED_MODULE_11__["default"],json:{write:!0}})],O.prototype,"origin",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__.reader)("origin")],O.prototype,"readOrigin",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:[_LOD_js__WEBPACK_IMPORTED_MODULE_16__["default"]],value:null,json:{write:!0}})],O.prototype,"lods",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],O.prototype,"scales",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],O.prototype,"size",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__.reader)("size",["rows","cols"])],O.prototype,"readSize",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__.writer)("size",{cols:{type:_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__.Integer},rows:{type:_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__.Integer}})],O.prototype,"writeSize",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_12__["default"],json:{write:!0}})],O.prototype,"spatialReference",void 0),O=w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.layers.support.TileInfo")],O),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(O||(O={}));const j=O;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/TileKey.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/TileKey.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TileKey": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class t{constructor(t,s,i,o,e=void 0){this.id=t,this.level=s,this.row=i,this.col=o,this.extent=e}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker.js ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_Handles_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/Handles.js */ "./node_modules/@arcgis/core/core/Handles.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_support_WatchUpdatingTracking_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../core/support/WatchUpdatingTracking.js */ "./node_modules/@arcgis/core/core/support/WatchUpdatingTracking.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _layers_graphics_data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../layers/graphics/data/FeatureStore.js */ "./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js");
/* harmony import */ var _layers_graphics_data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../layers/graphics/data/QueryEngine.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js");
/* harmony import */ var _layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../layers/support/TileInfo.js */ "./node_modules/@arcgis/core/layers/support/TileInfo.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _symbols_support_ElevationInfo_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../symbols/support/ElevationInfo.js */ "./node_modules/@arcgis/core/symbols/support/ElevationInfo.js");
/* harmony import */ var _snappingCandidateElevationAlignment_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../snappingCandidateElevationAlignment.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment.js");
/* harmony import */ var _snappingCandidateElevationFilter_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../snappingCandidateElevationFilter.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationFilter.js");
/* harmony import */ var _symbologySnappingCandidates_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../symbologySnappingCandidates.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/symbologySnappingCandidates.js");
/* harmony import */ var _FeatureServiceTiledFetcher_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./FeatureServiceTiledFetcher.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher.js");
/* harmony import */ var _FeatureServiceTileStore_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./FeatureServiceTileStore.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let I=class extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__["default"].EventedAccessor{constructor(){super(...arguments),this._isInitializing=!0,this.remoteClient=null,this._whenSetup=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.createResolver)(),this._elevationAligner=(0,_snappingCandidateElevationAlignment_js__WEBPACK_IMPORTED_MODULE_17__.getSnappingCandidateElevationAligner)(),this._elevationFilter=(0,_snappingCandidateElevationFilter_js__WEBPACK_IMPORTED_MODULE_18__.getSnappingCandidateElevationFilter)(),this._symbologyCandidatesFetcher=(0,_symbologySnappingCandidates_js__WEBPACK_IMPORTED_MODULE_19__.getSymbologySnappingCandidatesFetcher)(),this._handles=new _core_Handles_js__WEBPACK_IMPORTED_MODULE_2__["default"],this._updatingHandles=new _core_support_WatchUpdatingTracking_js__WEBPACK_IMPORTED_MODULE_10__.WatchUpdatingTracking,this._editsUpdatingHandles=new _core_support_WatchUpdatingTracking_js__WEBPACK_IMPORTED_MODULE_10__.WatchUpdatingTracking,this._pendingApplyEdits=new Map,this._alignPointsInFeatures=async(e,t)=>{const i={points:e},r=await this.remoteClient.invoke("alignElevation",i,{signal:t});return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),r},this._getSymbologyCandidates=async(e,t)=>{const i={candidates:e,spatialReference:this._spatialReference.toJSON()},r=await this.remoteClient.invoke("getSymbologyCandidates",i,{signal:t});return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),r}}get updating(){return this.updatingExcludingEdits||this._editsUpdatingHandles.updating||this._featureFetcher.updating}get updatingExcludingEdits(){return this._featureFetcher.updatingExcludingEdits||this._isInitializing||this._updatingHandles.updating}destroy(){this._featureFetcher?.destroy(),this._queryEngine?.destroy(),this._featureStore?.clear(),this._handles?.destroy()}async setup(e){if(this.destroyed)return{result:{}};const{geometryType:t,objectIdField:i,timeInfo:r,fields:s}=e.serviceInfo,{hasZ:a}=e,l=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__["default"].fromJSON(e.spatialReference);this._spatialReference=l,this._featureStore=new _layers_graphics_data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_12__["default"]({...e.serviceInfo,hasZ:a,hasM:!1}),this._queryEngine=new _layers_graphics_data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_13__.QueryEngine({spatialReference:e.spatialReference,featureStore:this._featureStore,geometryType:t,fields:s,hasZ:a,hasM:!1,objectIdField:i,timeInfo:r}),this._featureFetcher=new _FeatureServiceTiledFetcher_js__WEBPACK_IMPORTED_MODULE_20__.FeatureServiceTiledFetcher({store:new _FeatureServiceTileStore_js__WEBPACK_IMPORTED_MODULE_21__.FeatureServiceTileStore({featureStore:this._featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,globalIdField:e.serviceInfo.globalIdField,capabilities:e.serviceInfo.capabilities,spatialReference:l,sourceSpatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__["default"].fromJSON(e.serviceInfo.spatialReference)});const d="3d"===e.configuration.viewType;return this._elevationAligner=(0,_snappingCandidateElevationAlignment_js__WEBPACK_IMPORTED_MODULE_17__.getSnappingCandidateElevationAligner)(d,{elevationInfo:null!=e.elevationInfo?_symbols_support_ElevationInfo_js__WEBPACK_IMPORTED_MODULE_16__["default"].fromJSON(e.elevationInfo):null,alignPointsInFeatures:this._alignPointsInFeatures,spatialReference:l}),this._elevationFilter=(0,_snappingCandidateElevationFilter_js__WEBPACK_IMPORTED_MODULE_18__.getSnappingCandidateElevationFilter)(d),this._handles.add([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>this._featureFetcher.availability),(e=>this.emit("notify-availability",{availability:e})),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.sync),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>this.updating),(()=>this._notifyUpdating()))]),this._whenSetup.resolve(),this._isInitializing=!1,this.configure(e.configuration)}async configure(e){return await this._updatingHandles.addPromise(this._whenSetup.promise),this._updateFeatureFetcherConfiguration(e),{result:{}}}async fetchCandidates(e,t){await this._whenSetup.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t);const i=E(e),r=null!=t?t.signal:null,n=await this._queryEngine.executeQueryForSnapping(i,r);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r);const a=await this._elevationAligner.alignCandidates(n.candidates,r);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r);const o=await this._symbologyCandidatesFetcher.fetch(a,r);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r);const l=0===o.length?a:a.concat(o);return{result:{candidates:this._elevationFilter.filter(i,l)}}}async updateTiles(e,t){return await this._updatingHandles.addPromise(this._whenSetup.promise),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),this._featureFetcher.tileSize=e.tileSize,this._featureFetcher.tilesOfInterest=e.tiles,this._featureFetcher.tileInfo=null!=e.tileInfo?_layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_14__["default"].fromJSON(e.tileInfo):null,b}async refresh(e,t){return await this._updatingHandles.addPromise(this._whenSetup.promise),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),this._featureFetcher.refresh(),b}async whenNotUpdating(e,t){return await this._updatingHandles.addPromise(this._whenSetup.promise),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),await (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.whenOnce)((()=>!this.updatingExcludingEdits),t),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),b}async getDebugInfo(e,t){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),{result:this._featureFetcher.debugInfo}}async beginApplyEdits(e,t){this._updatingHandles.addPromise(this._whenSetup.promise),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t);const i=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.createResolver)();return this._pendingApplyEdits.set(e.id,i),this._featureFetcher.applyEdits(i.promise),this._editsUpdatingHandles.addPromise(i.promise),b}async endApplyEdits(e,t){const i=this._pendingApplyEdits.get(e.id);return i&&i.resolve(e.edits),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),b}async notifyElevationSourceChange(e,t){return this._elevationAligner.notifyElevationSourceChange(),b}async notifySymbologyChange(e,t){return this._symbologyCandidatesFetcher.notifySymbologyChange(),b}async setSymbologySnappingSupported(e){return this._symbologyCandidatesFetcher=(0,_symbologySnappingCandidates_js__WEBPACK_IMPORTED_MODULE_19__.getSymbologySnappingCandidatesFetcher)(e,this._getSymbologyCandidates),b}_updateFeatureFetcherConfiguration(e){this._featureFetcher.filter=null!=e.filter?_rest_support_Query_js__WEBPACK_IMPORTED_MODULE_15__["default"].fromJSON(e.filter):null,this._featureFetcher.customParameters=e.customParameters}_notifyUpdating(){this.emit("notify-updating",{updating:this.updating})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({readOnly:!0})],I.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({readOnly:!0})],I.prototype,"updatingExcludingEdits",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],I.prototype,"_isInitializing",void 0),I=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],I);const w=I;function E(e){return{point:e.point,mode:e.mode,distance:e.distance,returnEdge:e.returnEdge,returnVertex:e.returnVertex,query:null!=e.filter?e.filter:{where:"1=1"}}}const b={result:{}};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FeatureServiceTileCache": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class t{constructor(){this._store=new Map,this._byteSize=0}set(t,e){this.delete(t),this._store.set(t,e),this._byteSize+=e.byteSize}delete(t){const e=this._store.get(t);return!!this._store.delete(t)&&(null!=e&&(this._byteSize-=e.byteSize),!0)}get(t){return this._used(t),this._store.get(t)}has(t){return this._used(t),this._store.has(t)}clear(){this._store.clear()}applyByteSizeLimit(t,e){for(const[s,r]of this._store){if(this._byteSize<=t)break;this.delete(s),e(r)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}_used(t){const e=this._store.get(t);e&&(this._store.delete(t),this._store.set(t,e))}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FeatureServiceTileStore": () => (/* binding */ g),
/* harmony export */   "ProcessResult": () => (/* binding */ T)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_byteSizeEstimations_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/byteSizeEstimations.js */ "./node_modules/@arcgis/core/core/byteSizeEstimations.js");
/* harmony import */ var _core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/ByteSizeUnit.js */ "./node_modules/@arcgis/core/core/ByteSizeUnit.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../layers/graphics/featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _layers_graphics_data_BoundsStore_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../layers/graphics/data/BoundsStore.js */ "./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js");
/* harmony import */ var _layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../layers/support/TileInfo.js */ "./node_modules/@arcgis/core/layers/support/TileInfo.js");
/* harmony import */ var _layers_support_TileKey_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../layers/support/TileKey.js */ "./node_modules/@arcgis/core/layers/support/TileKey.js");
/* harmony import */ var _rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../rest/query/operations/query.js */ "./node_modules/@arcgis/core/rest/query/operations/query.js");
/* harmony import */ var _FeatureServiceTileCache_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./FeatureServiceTileCache.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let g=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10*_core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_3__.ByteSizeUnit.MEGABYTES,this._tileBounds=new _layers_graphics_data_BoundsStore_js__WEBPACK_IMPORTED_MODULE_11__.BoundsStore,this._tiles=new _FeatureServiceTileCache_js__WEBPACK_IMPORTED_MODULE_15__.FeatureServiceTileCache,this._refCounts=new Map,this._tileFeatureCounts=new Map,this._tmpBoundingRect=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.create)()}add(e,t){const s=[];for(const i of t)this._referenceFeature(i.objectId)===I.ADDED&&s.push(i);this._addTileStorage(e,new Set(t.map((e=>e.objectId))),y(t)),this.featureStore.addMany(s),this._tiles.applyByteSizeLimit(this.maximumByteSize,(e=>this._removeTileStorage(e)))}destroy(){this.clear(),this._tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this._tileBounds.clear(),this._tiles.clear(),this._refCounts.clear()}refresh(){this.clear(),this._tileFeatureCounts.clear()}processEdits(e,t,s){return this._processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this._processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,s)}_addTileStorage(e,t,s){const i=e.id;this._tiles.set(i,new E(e,t,s)),this._tileBounds.set(i,e.extent),this._tileFeatureCounts.set(i,t.size)}_remove({id:e}){const t=this._tiles.get(e);t&&this._removeTileStorage(t)}_removeTileStorage(e){const t=[];for(const i of e.objectIds)this._unreferenceFeature(i)===I.REMOVED&&t.push(i);this.featureStore.removeManyById(t);const s=e.data.id;this._tiles.delete(s),this._tileBounds.delete(s)}_processEditsDelete(e){this.featureStore.removeManyById(e);for(const[,t]of this._tiles){for(const s of e)t.objectIds.delete(s);this._tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this._refCounts.delete(t)}async _processEditsRefetch(e,t,s){const i=(await t(e,s)).features,{hasZ:r,hasM:o}=this.featureStore;for(const n of i){const e=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_10__.getBoundsOptimizedGeometry)(this._tmpBoundingRect,n.geometry,r,o);null!=e&&this._tileBounds.forEachInBounds(e,(e=>{const t=this._tiles.get(e);this.featureStore.add(n);const s=n.objectId;t.objectIds.has(s)||(t.objectIds.add(s),this._referenceFeature(s),this._tileFeatureCounts.set(t.data.id,t.objectIds.size))}))}}process(e,t=(()=>!0)){if(null==this.tileInfo||!e.extent||null!=this.extent&&!(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.intersects)((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.fromExtent)(this.extent,this._tmpBoundingRect),e.extent))return new T(e);if(this._tiles.has(e.id))return new T(e);const s=this._createTileTree(e,this.tileInfo);return this._simplify(s,t,null,0,1),this._collectMissingTiles(e,s,this.tileInfo)}get debugInfo(){return Array.from(this._tiles.values()).map((({data:e})=>({data:e,featureCount:this._tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){return this._tileFeatureCounts.get(e.id)??0}async fetchCount(e,t,s,i){const r=this._tileFeatureCounts.get(e.id);if(null!=r)return r;const o=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_14__.executeQueryForCount)(t,s,i);return this._tileFeatureCounts.set(e.id,o.data.count),o.data.count}_createTileTree(e,t){const s=new S(e.level,e.row,e.col);return t.updateTileInfo(s,_layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_12__["default"].ExtrapolateOptions.POWER_OF_TWO),this._tileBounds.forEachInBounds(e.extent,(i=>{const r=this._tiles.get(i)?.data;r&&this._tilesAreRelated(e,r)&&this._populateChildren(s,r,t,this._tileFeatureCounts.get(r.id)||0)})),s}_tilesAreRelated(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const s=e.level<t.level,i=s?e:t,r=s?t:e,o=1<<r.level-i.level;return Math.floor(r.row/o)===i.row&&Math.floor(r.col/o)===i.col}_populateChildren(e,t,s,i){const r=t.level-e.level-1;if(r<0)return void(e.isLeaf=!0);const o=t.row>>r,n=t.col>>r,l=e.row<<1,a=n-(e.col<<1)+(o-l<<1),c=e.children[a];if(null!=c)this._populateChildren(c,t,s,i);else{const r=new S(e.level+1,o,n);s.updateTileInfo(r,_layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_12__["default"].ExtrapolateOptions.POWER_OF_TWO),e.children[a]=r,this._populateChildren(r,t,s,i)}}_simplify(e,t,s,i,r){const o=r*r;if(e.isLeaf)return t(this.getFeatureCount(e),r)?0:(this._remove(e),null!=s&&(s.children[i]=null),o);const n=r/2,l=n*n;let a=0;for(let c=0;c<e.children.length;c++){const s=e.children[c];a+=null!=s?this._simplify(s,t,e,c,n):l}return 0===a?this._mergeChildren(e):1-a/o<j&&(this._purge(e),null!=s&&(s.children[i]=null),a=o),a}_mergeChildren(e){const t=new Set;let s=0;this._forEachLeaf(e,(e=>{const i=this._tiles.get(e.id);if(i){s+=i.byteSize;for(const e of i.objectIds)t.has(e)||(t.add(e),this._referenceFeature(e));this._remove(e)}})),this._addTileStorage(e,t,s),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this._tileFeatureCounts.set(e.id,t.size)}_forEachLeaf(e,t){for(const s of e.children)null!=s&&(s.isLeaf?t(s):this._forEachLeaf(s,t))}_purge(e){if(null!=e)if(e.isLeaf)this._remove(e);else for(let t=0;t<e.children.length;t++){const s=e.children[t];this._purge(s),e.children[t]=null}}_collectMissingTiles(e,t,s){const i=new F(s,e,this.extent);return this._collectMissingTilesRecurse(t,i,1),i.info}_collectMissingTilesRecurse(e,t,s){if(e.isLeaf)return;if(!e.hasChildren)return void t.addMissing(e.level,e.row,e.col,s);const i=s/2;for(let r=0;r<e.children.length;r++){const s=e.children[r];null==s?t.addMissing(e.level+1,(e.row<<1)+((2&r)>>1),(e.col<<1)+(1&r),i):this._collectMissingTilesRecurse(s,t,i)}}_referenceFeature(e){const t=(this._refCounts.get(e)||0)+1;return this._refCounts.set(e,t),1===t?I.ADDED:I.UNCHANGED}_unreferenceFeature(e){const t=(this._refCounts.get(e)||0)-1;return 0===t?(this._refCounts.delete(e),I.REMOVED):(t>0&&this._refCounts.set(e,t),I.UNCHANGED)}get test(){return{tiles:Array.from(this._tiles.values()).map((e=>`${e.data.id}:[${Array.from(e.objectIds)}]`)),featureReferences:Array.from(this._refCounts.keys()).map((e=>`${e}:${this._refCounts.get(e)}`))}}};function y(e){return e.reduce(((e,t)=>e+v(t)),0)}function v(e){return 32+C(e.geometry)+(0,_core_byteSizeEstimations_js__WEBPACK_IMPORTED_MODULE_2__.estimateAttributesObjectSize)(e.attributes)}function C(e){if(null==e)return 0;const t=(0,_core_byteSizeEstimations_js__WEBPACK_IMPORTED_MODULE_2__.estimateFixedArraySize)(e.lengths,4);return 32+(0,_core_byteSizeEstimations_js__WEBPACK_IMPORTED_MODULE_2__.estimateFixedArraySize)(e.coords,8)+t}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],g.prototype,"featureStore",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],g.prototype,"tileInfo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],g.prototype,"extent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],g.prototype,"maximumByteSize",void 0),g=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],g);class E{constructor(e,t,s){this.data=e,this.objectIds=t,this.byteSize=s}}class S{constructor(e,t,s){this.level=e,this.row=t,this.col=s,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(null!=this.children[0]||null!=this.children[1]||null!=this.children[2]||null!=this.children[3])}}class T{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.area)(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class F{constructor(e,t,s){this._tileInfo=e,this._extent=null,this.info=new T(t),null!=s&&(this._extent=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.fromExtent)(s))}addMissing(e,t,s,i){const r=new _layers_support_TileKey_js__WEBPACK_IMPORTED_MODULE_13__.TileKey(null,e,t,s);this._tileInfo.updateTileInfo(r,_layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_12__["default"].ExtrapolateOptions.POWER_OF_TWO),null==r.extent||null!=this._extent&&!(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.intersects)(this._extent,r.extent)||(this.info.missingTiles.push({data:r,resolution:i}),this.info.coveredArea-=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.area)(r.extent))}}const j=.18751;var I;!function(e){e[e.ADDED=0]="ADDED",e[e.REMOVED=1]="REMOVED",e[e.UNCHANGED=2]="UNCHANGED"}(I||(I={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FeatureServiceTiledFetcher": () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_AsyncSequence_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/AsyncSequence.js */ "./node_modules/@arcgis/core/core/AsyncSequence.js");
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/HandleOwner.js */ "./node_modules/@arcgis/core/core/HandleOwner.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../layers/graphics/featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../layers/support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _rest_query_operations_pbfOptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../rest/query/operations/pbfOptimizedFeatureSet.js */ "./node_modules/@arcgis/core/rest/query/operations/pbfOptimizedFeatureSet.js");
/* harmony import */ var _rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../rest/query/operations/query.js */ "./node_modules/@arcgis/core/rest/query/operations/query.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _PendingFeatureTile_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./PendingFeatureTile.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let I=class extends _core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_4__.HandleOwner{get _minimumVerticesPerFeature(){switch(this.store?.featureStore.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":return 1;case"esriGeometryPolygon":return 4;case"esriGeometryPolyline":return 2}}set filter(e){const t=this._get("filter"),i=this._filterProperties(e);JSON.stringify(t)!==JSON.stringify(i)&&this._set("filter",i)}set customParameters(e){const t=this._get("customParameters");JSON.stringify(t)!==JSON.stringify(e)&&this._set("customParameters",e)}get _configuration(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(e){const t=this._get("tileInfo");t!==e&&(null!=e&&null!=t&&JSON.stringify(e)===JSON.stringify(t)||(this._set("tileInfo",e),this.store.tileInfo=e))}set tileSize(e){this._get("tileSize")!==e&&this._set("tileSize",e)}get updating(){return this.updatingExcludingEdits||this._pendingEdits.updating}get updatingExcludingEdits(){return this.updatingHandles.updating}get hasZ(){return this.store.featureStore.hasZ}constructor(e){super(e),this.tilesOfInterest=[],this.availability=0,this._pendingTiles=new Map,this._pendingEdits=new _core_AsyncSequence_js__WEBPACK_IMPORTED_MODULE_2__.AsyncSequence,this._pendingEditsAbortController=new AbortController}initialize(){this._initializeFetchExtent(),this.updatingHandles.add((()=>this._configuration),(()=>this.refresh())),this.updatingHandles.add((()=>this.tilesOfInterest),((e,i)=>{(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.equals)(e,i,(({id:e},{id:t})=>e===t))||this._process()}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_8__.sync)}destroy(){this._pendingTiles.forEach((e=>this._deletePendingTile(e))),this._pendingTiles.clear(),this.store.destroy(),this.tilesOfInterest.length=0,this._pendingEditsAbortController.abort(),this._pendingEditsAbortController=null}refresh(){this.store.refresh(),this._pendingTiles.forEach((e=>this._deletePendingTile(e))),this._process()}applyEdits(e){this._pendingEdits.push(e,(async e=>{if(0===e.addedFeatures.length&&0===e.updatedFeatures.length&&0===e.deletedFeatures.length)return;for(const[,i]of this._pendingTiles)i.reset();const t={...e,deletedFeatures:e.deletedFeatures.map((({objectId:e,globalId:t})=>e&&-1!==e?e:this._lookupObjectIdByGlobalId(t)))};await this.updatingHandles.addPromise(this.store.processEdits(t,((e,t)=>this._queryFeaturesById(e,t)),this._pendingEditsAbortController.signal)),this._processPendingTiles()}))}_initializeFetchExtent(){if(!this.capabilities.query.supportsExtent||!(0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_16__.isHostedAgolService)(this.url))return;const e=(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_3__.createTask)((async e=>{try{const t=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_18__.executeQueryForExtent)(this.url,new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_19__["default"]({where:"1=1",outSpatialReference:this.spatialReference,cacheHint:this.capabilities.query.supportsCacheHint??void 0}),{query:this._configuration.customParameters,signal:e});this.store.extent=_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_13__["default"].fromJSON(t.data?.extent)}catch(t){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.throwIfAbortError)(t),_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).warn("Failed to fetch data extent",t)}}));this.updatingHandles.addPromise(e.promise.then((()=>this._process()))),this.handles.add((0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_5__.makeHandle)((()=>e.abort())))}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this._pendingTiles.values()).map((e=>e.debugInfo)),storedTiles:this.store.debugInfo}}_process(){this._markTilesNotAlive(),this._createPendingTiles(),this._deletePendingTiles(),this._processPendingTiles()}_markTilesNotAlive(){for(const[,e]of this._pendingTiles)e.alive=!1}_createPendingTiles(){const e=this._collectMissingTilesInfo();if(this._setAvailability(null==e?1:e.coveredArea/e.fullArea),null!=e)for(const{data:t,resolution:i}of e.missingTiles){const e=this._pendingTiles.get(t.id);e?(e.resolution=i,e.alive=!0):this._createPendingTile(t,i)}}_collectMissingTilesInfo(){let e=null;for(let t=this.tilesOfInterest.length-1;t>=0;t--){const i=this.tilesOfInterest[t],s=this.store.process(i,((e,t)=>this._verifyTileComplexity(e,t)));null==e?e=s:e.prepend(s)}return e}_deletePendingTiles(){for(const[,e]of this._pendingTiles)e.alive||this._deletePendingTile(e)}_processPendingTiles(){const e={fetchCount:(e,t)=>this._fetchCount(e,t),fetchFeatures:(e,t,i)=>this._fetchFeatures(e,t,i),finish:(e,t)=>this._finishPendingTile(e,t),resume:()=>this._processPendingTiles()};if(this._ensureFetchAllCounts(e))for(const[,t]of this._pendingTiles)this._verifyTileComplexity(this.store.getFeatureCount(t.data),t.resolution)&&this.updatingHandles.addPromise(t.process(e))}_verifyTileComplexity(e,t){return this._verifyVertexComplexity(e)&&this._verifyFeatureDensity(e,t)}_verifyVertexComplexity(e){return e*this._minimumVerticesPerFeature<C}_verifyFeatureDensity(e,t){if(null==this.tileInfo)return!1;const i=this.tileSize*t;return e*(E/(i*i))<S}_ensureFetchAllCounts(e){let t=!0;for(const[,i]of this._pendingTiles)i.state.type<_PendingFeatureTile_js__WEBPACK_IMPORTED_MODULE_20__.StateType.FETCHED_COUNT&&this.updatingHandles.addPromise(i.process(e)),i.state.type<=_PendingFeatureTile_js__WEBPACK_IMPORTED_MODULE_20__.StateType.FETCH_COUNT&&(t=!1);return t}_finishPendingTile(e,t){this.store.add(e.data,t),this._deletePendingTile(e),this._updateAvailability()}_updateAvailability(){const e=this._collectMissingTilesInfo();this._setAvailability(null==e?1:e.coveredArea/e.fullArea)}_setAvailability(e){this._set("availability",e)}_createPendingTile(e,t){const i=new _PendingFeatureTile_js__WEBPACK_IMPORTED_MODULE_20__.PendingFeatureTile(e,t);return this._pendingTiles.set(e.id,i),i}_deletePendingTile(e){e.reset(),this._pendingTiles.delete(e.data.id)}async _fetchCount(e,t){return this.store.fetchCount(e.data,this.url,this._createCountQuery(e),{query:this.customParameters,timeout:O,signal:t})}async _fetchFeatures(e,t,i){let s=0;const r=[];let n=0,o=t;for(;;){const a=this._createFeaturesQuery(e),l=this._setPagingParameters(a,s,o),{features:u,exceededTransferLimit:c}=await this._queryFeatures(a,i);l&&(s+=a.num),n+=u.length;for(const e of u)r.push(e);if(o=t-n,!l||!c||o<=0)return r}}_filterProperties(e){return null==e?{where:"1=1",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||"1=1",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}}_lookupObjectIdByGlobalId(e){const t=this.globalIdField,i=this.objectIdField;if(null==t)throw new Error("Expected globalIdField to be defined");let s=null;if(this.store.featureStore.forEach((r=>{e===r.attributes[t]&&(s=r.objectId??r.attributes[i])})),null==s)throw new Error(`Expected to find a feature with globalId ${e}`);return s}_queryFeaturesById(e,t){const i=this._createFeaturesQuery();return i.objectIds=e,this._queryFeatures(i,t)}_queryFeatures(e,t){return this.capabilities.query.supportsFormatPBF?this._queryFeaturesPBF(e,t):this._queryFeaturesJSON(e,t)}async _queryFeaturesPBF(e,t){const{sourceSpatialReference:i}=this,{data:s}=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_18__.executeQueryPBF)(this.url,e,new _rest_query_operations_pbfOptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_17__.OptimizedFeatureSetParserContext({sourceSpatialReference:i}),{query:this._configuration.customParameters,timeout:O,signal:t});return (0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_15__.unquantizeOptimizedFeatureSet)(s)}async _queryFeaturesJSON(e,t){const{sourceSpatialReference:i}=this,{data:s}=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_18__.executeQuery)(this.url,e,i,{query:this._configuration.customParameters,timeout:O,signal:t});return (0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_15__.convertFromFeatureSet)(s,this.objectIdField)}_createCountQuery(e){const t=this._createBaseQuery(e);return this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0),t}_createFeaturesQuery(e=null){const t=this._createBaseQuery(e);return t.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField],t.returnGeometry=!0,null!=e&&(this.capabilities.query.supportsResultType?t.resultType="tile":this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0)),t}_createBaseQuery(e){const t=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_19__["default"]({returnZ:this.hasZ,returnM:!1,geometry:null!=this.tileInfo&&null!=e?(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_14__.toExtent)(e.data.extent,this.tileInfo.spatialReference):void 0}),i=this._configuration.filter;return null!=i&&(t.where=i.where,t.gdbVersion=i.gdbVersion,t.timeExtent=i.timeExtent),t.outSpatialReference=this.spatialReference,t}_setPagingParameters(e,t,i){if(!this.capabilities.query.supportsPagination)return!1;const{supportsMaxRecordCountFactor:s,supportsCacheHint:r,tileMaxRecordCount:n,maxRecordCount:o,supportsResultType:a}=this.capabilities.query,l=s?_rest_support_Query_js__WEBPACK_IMPORTED_MODULE_19__["default"].MAX_MAX_RECORD_COUNT_FACTOR:1,u=l*((a||r)&&n?n:o||v);return e.start=t,s?(e.maxRecordCountFactor=Math.min(l,Math.ceil(i/u)),e.num=Math.min(i,e.maxRecordCountFactor*u)):e.num=Math.min(i,u),!0}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({constructOnly:!0})],I.prototype,"url",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({constructOnly:!0})],I.prototype,"objectIdField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({constructOnly:!0})],I.prototype,"globalIdField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({constructOnly:!0})],I.prototype,"capabilities",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({constructOnly:!0})],I.prototype,"sourceSpatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({constructOnly:!0})],I.prototype,"spatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({constructOnly:!0})],I.prototype,"store",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],I.prototype,"_minimumVerticesPerFeature",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],I.prototype,"filter",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],I.prototype,"customParameters",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],I.prototype,"_configuration",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],I.prototype,"tileInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],I.prototype,"tileSize",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],I.prototype,"tilesOfInterest",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],I.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],I.prototype,"updatingExcludingEdits",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],I.prototype,"availability",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],I.prototype,"hasZ",null),I=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_12__.subclass)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],I);const v=2e3,O=6e5,C=1e6,E=25,S=1;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PendingFeatureTile": () => (/* binding */ r),
/* harmony export */   "StateType": () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class r{constructor(t,e){this.data=t,this.resolution=e,this.state={type:u.CREATED},this.alive=!0}process(t){switch(this.state.type){case u.CREATED:return this.state=this._gotoFetchCount(this.state,t),this.state.task.promise.then(t.resume,t.resume);case u.FETCH_COUNT:break;case u.FETCHED_COUNT:return this.state=this._gotoFetchFeatures(this.state,t),this.state.task.promise.then(t.resume,t.resume);case u.FETCH_FEATURES:break;case u.FETCHED_FEATURES:this.state=this._goToDone(this.state,t);case u.DONE:}return null}get debugInfo(){return{data:this.data,featureCount:this._featureCount,state:this._stateToString}}get _featureCount(){switch(this.state.type){case u.CREATED:case u.FETCH_COUNT:return 0;case u.FETCHED_COUNT:return this.state.featureCount;case u.FETCH_FEATURES:return this.state.previous.featureCount;case u.FETCHED_FEATURES:return this.state.features.length;case u.DONE:return this.state.previous.features.length}}get _stateToString(){switch(this.state.type){case u.CREATED:return"created";case u.FETCH_COUNT:return"fetch-count";case u.FETCHED_COUNT:return"fetched-count";case u.FETCH_FEATURES:return"fetch-features";case u.FETCHED_FEATURES:return"fetched-features";case u.DONE:return"done"}}_gotoFetchCount(s,a){return{type:u.FETCH_COUNT,previous:s,task:(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.createTask)((async t=>{const s=await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.resultOrAbort)(a.fetchCount(this,t));this.state.type===u.FETCH_COUNT&&(this.state=this._gotoFetchedCount(this.state,s.ok?s.value:1/0))}))}}_gotoFetchedCount(t,e){return{type:u.FETCHED_COUNT,featureCount:e,previous:t}}_gotoFetchFeatures(s,a){return{type:u.FETCH_FEATURES,previous:s,task:(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.createTask)((async t=>{const E=await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.resultOrAbort)(a.fetchFeatures(this,s.featureCount,t));this.state.type===u.FETCH_FEATURES&&(this.state=this._gotoFetchedFeatures(this.state,E.ok?E.value:[]))}))}}_gotoFetchedFeatures(t,e){return{type:u.FETCHED_FEATURES,previous:t,features:e}}_goToDone(t,e){return e.finish(this,t.features),{type:u.DONE,previous:t}}reset(){const t=this.state;switch(this.state={type:u.CREATED},t.type){case u.CREATED:case u.FETCHED_COUNT:case u.FETCHED_FEATURES:case u.DONE:break;case u.FETCH_COUNT:case u.FETCH_FEATURES:t.task.abort()}}intersects(t){return null==t||!this.data.extent||((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.fromExtent)(t,T),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.intersects)(this.data.extent,T))}}var u;!function(t){t[t.CREATED=0]="CREATED",t[t.FETCH_COUNT=1]="FETCH_COUNT",t[t.FETCHED_COUNT=2]="FETCHED_COUNT",t[t.FETCH_FEATURES=3]="FETCH_FEATURES",t[t.FETCHED_FEATURES=4]="FETCHED_FEATURES",t[t.DONE=5]="DONE"}(u||(u={}));const T=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getSnappingCandidateElevationAligner": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/LRUCache.js */ "./node_modules/@arcgis/core/core/LRUCache.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../symbols/support/unitConversionUtils.js */ "./node_modules/@arcgis/core/symbols/support/unitConversionUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function i(e=!1,t){if(e){const{elevationInfo:e,alignPointsInFeatures:s,spatialReference:n}=t;return new c(e,s,n)}return new a}class a{async alignCandidates(e,t){return e}notifyElevationSourceChange(){}}const r=1024;class c{constructor(t,s,o){this._elevationInfo=t,this._alignPointsInFeatures=s,this.spatialReference=o,this._alignmentsCache=new _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_1__.LRUCache(r),this._cacheVersion=0,this._metersPerVerticalUnit=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__.getMetersPerVerticalUnitForSR)(o)}async alignCandidates(e,t){const s=this._elevationInfo;return null==s||"absolute-height"!==s.mode||s.featureExpressionInfo?this._alignComputedElevationCandidates(e,t):(this._alignAbsoluteElevationCandidates(e,s),e)}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}_alignAbsoluteElevationCandidates(e,t){const{offset:s,unit:n}=t;if(null==s)return;const i=s*((0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.getMetersPerUnit)(n??"meters")/this._metersPerVerticalUnit);for(const o of e)switch(o.type){case"edge":o.start.z+=i,o.end.z+=i;continue;case"vertex":o.target.z+=i;continue}}async _alignComputedElevationCandidates(e,n){const o=new Map;for(const s of e)(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_2__.getOrCreateMapValue)(o,s.objectId,d).push(s);const[i,a,r]=this._prepareQuery(o),c=await this._alignPointsInFeatures(i,n);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(n);if(r!==this._cacheVersion)return this._alignComputedElevationCandidates(e,n);this._applyCacheAndResponse(i,c,a);const{drapedObjectIds:l,failedObjectIds:h}=c,u=[];for(const t of e){const{objectId:e}=t;l.has(e)&&"edge"===t.type&&(t.draped=!0),h.has(e)||u.push(t)}return u}_prepareQuery(e){const t=[],s=[];for(const[n,o]of e){const e=[];for(const t of o)this._addToQueriesOrCachedResult(n,t.target,e,s),"edge"===t.type&&(this._addToQueriesOrCachedResult(n,t.start,e,s),this._addToQueriesOrCachedResult(n,t.end,e,s));0!==e.length&&t.push({objectId:n,points:e})}return[t,s,this._cacheVersion]}_addToQueriesOrCachedResult(e,t,s,n){const o=h(e,t),i=this._alignmentsCache.get(o);null==i?s.push(t):n.push(new l(t,i))}_applyCacheAndResponse(e,{elevations:t,drapedObjectIds:s,failedObjectIds:n},o){for(const r of o)r.apply();let i=0;const a=this._alignmentsCache;for(const{objectId:r,points:c}of e){if(n.has(r)){i+=c.length;continue}const e=!s.has(r);for(const s of c){const n=h(r,s),o=t[i++];s.z=o,e&&a.put(n,o,1)}}}}class l{constructor(e,t){this.point=e,this.z=t}apply(){this.point.z=this.z}}function h(e,{x:t,y:s,z:n}){return`${e}-${t}-${s}-${n??0}}`}function d(){return[]}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationFilter.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationFilter.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getSnappingCandidateElevationFilter": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class t{filter(t,n){return n}notifyElevationSourceChange(){}}class n{filter(t,n){const{point:r,distance:c}=t,{z:i}=r;if(!(null!=i))return n;if(0===n.length)return n;const o=s(c),u=this._updateCandidatesTo3D(n,r,o).filter(e);return u.sort(a),u}_updateCandidatesTo3D(t,n,e){for(const r of t)switch(r.type){case"edge":c(r,n,e);continue;case"vertex":o(r,n,e);continue}return t}}function e(t){return t.distance<=1}function r(e=!1){return e?new n:new t}function c(t,n,{x:e,y:r,z:c}){const{start:o,end:s,target:a}=t;t.draped||i(a,n,o,s);const u=(n.x-a.x)/e,d=(n.y-a.y)/r,f=(n.z-a.z)/c;t.distance=Math.sqrt(u*u+d*d+f*f)}function i(t,n,e,r){const c=r.x-e.x,i=r.y-e.y,o=r.z-e.z,s=c*c+i*i+o*o,a=(n.x-e.x)*c+(n.y-e.y)*i+o*(n.z-e.z),u=Math.min(1,Math.max(0,a/s)),d=e.x+c*u,f=e.y+i*u,x=e.z+o*u;t.x=d,t.y=f,t.z=x}function o(t,n,{x:e,y:r,z:c}){const{target:i}=t,o=(n.x-i.x)/e,s=(n.y-i.y)/r,a=(n.z-i.z)/c,u=Math.sqrt(o*o+s*s+a*a);t.distance=u}function s(t){return"number"==typeof t?{x:t,y:t,z:t}:t}function a(t,n){return t.distance-n.distance}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/symbologySnappingCandidates.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/symbologySnappingCandidates.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getSymbologySnappingCandidatesFetcher": () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/LRUCache.js */ "./node_modules/@arcgis/core/core/LRUCache.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/string.js */ "./node_modules/@arcgis/core/core/string.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function n(t=!1,e){return t?new i(e):new c}class c{async fetch(){return[]}notifySymbologyChange(){}}const r=1024;class i{constructor(t){this._getSymbologyCandidates=t,this._candidatesCache=new _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_2__.LRUCache(r),this._cacheVersion=0}async fetch(e,o){if(0===e.length)return[];const n=[],c=[],r=this._candidatesCache;for(const s of e){const e=a(s),o=r.get(e);if(o)for(const s of o)c.push((0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(s));else n.push(s),r.put(e,[],1)}if(0===n.length)return c;const i=this._cacheVersion,{candidates:h,sourceCandidateIndices:d}=await this._getSymbologyCandidates(n,o);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(o);if(i!==this._cacheVersion)return this.fetch(e,o);const f=[],{length:g}=h;for(let s=0;s<g;++s){const e=h[s],o=a(n[d[s]]),c=r.get(o);c.push(e),r.put(o,c,c.length),f.push((0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(e))}return c.concat(f)}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function a(t){switch(t.type){case"vertex":{const{objectId:e,target:s}=t,n=`${e}-vertex-${s.x}-${s.y}-${s.z??0}`;return (0,_core_string_js__WEBPACK_IMPORTED_MODULE_4__.numericHash)(n).toString()}case"edge":{const{objectId:e,start:s,end:n}=t,c=`${e}-edge-${s.x}-${s.y}-${s.z??0}-to-${n.x}-${n.y}-${n.z??0}`;return (0,_core_string_js__WEBPACK_IMPORTED_MODULE_4__.numericHash)(c).toString()}default:return""}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvZmU4MmEwNmVkM2IyMTMwYWQ3OTYzYjYzNWMwZDFiNmMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNnTixvQkFBb0Isb0RBQUMsQ0FBQyxjQUFjLHNEQUFzRCxVQUFVLG9CQUFvQixxQkFBcUIsNENBQTRDLFdBQVcsdURBQXVELGlCQUFpQix5QkFBeUIsZ0RBQWdELGNBQWMsc0NBQXNDLEtBQUssdURBQUMsRUFBRSxpRkFBQyxxQ0FBcUMsdURBQUMsRUFBRSxpRkFBQyxnQ0FBMkQ7Ozs7Ozs7Ozs7Ozs7OztBQ0p0c0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGFBQWEseUdBQXlHLFNBQVMsR0FBNkI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKbEs7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG1CQUFtQixjQUFjLFVBQVUsY0FBYyxlQUFlLFFBQVEseUNBQXlDLGFBQWEsaUJBQWlCLHFCQUFxQixNQUFNLG9CQUFvQixNQUFNLG9CQUFvQixTQUFTLGNBQWMsZUFBZSxnQ0FBZ0MsUUFBUSxtREFBbUQsU0FBUyxjQUFjLGlCQUFpQiw4Q0FBOEMsUUFBUSxZQUFZLElBQUksZUFBZSxTQUFTLGNBQWMsaUJBQWlCLHlCQUF5Qix5QkFBeUIsd0JBQXdCLHVCQUF1QixrQkFBa0IsZ0JBQWdCLG9CQUFvQixnQkFBNEs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKdjFCO0FBQ0E7QUFDQTtBQUNBO0FBQzhYLE1BQU0sc0JBQXNCLDZEQUFDLENBQUMsZUFBZSx5SEFBeUgsUUFBUSxjQUFjLHNIQUFzSCxJQUFJLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxNQUFNLGtCQUFrQixnQkFBZ0IsaUJBQWlCLGdCQUFnQixvQkFBb0IsOEJBQThCLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxLQUFLLHdFQUFDLE9BQU8sVUFBVSwrQkFBK0IsdURBQUMsRUFBRSxzRkFBQyxFQUFFLGtCQUFrQixVQUFVLG9DQUFvQyx1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ZSx5REFBeUQsdURBQUMseUJBQXlCLGlCQUFpQix5QkFBeUIsd0NBQXdDLGtCQUFrQix3QkFBd0IsNkJBQTZCLG9EQUFDLEtBQUssNkJBQTZCLHlCQUF5Qiw0QkFBNEIsc0NBQXNDLHlDQUF5QyxxRUFBQyxJQUFJLGlEQUFpRCxZQUFZLFNBQVMsR0FBRyxZQUFZLElBQUksS0FBSyxxQ0FBcUMscUNBQXFDLG9EQUFDLEtBQUssbUJBQW1CLHdCQUF3QixvREFBb0QsY0FBYyxlQUFlLGNBQWMsTUFBTSxvQkFBb0IsUUFBUSxFQUFFLFVBQVUsSUFBSSxHQUFHLElBQUksR0FBRyxPQUFPLEVBQUUsT0FBTyw0REFBQyxlQUFlLFlBQVksTUFBTSx5QkFBeUIsUUFBUSxFQUFFLFFBQVEsSUFBSSxHQUFHLElBQUksR0FBRyxPQUFPLE1BQU0sSUFBSSxHQUFHLElBQUksR0FBRyxPQUFPLEVBQUUsT0FBTyw0REFBQyxlQUFlLGtCQUFxRSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NvcmUvQXN5bmNTZXF1ZW5jZS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jb3JlL0J5dGVTaXplVW5pdC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jb3JlL2J5dGVTaXplRXN0aW1hdGlvbnMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3N1cHBvcnQvTE9ELmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L1RpbGVJbmZvLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L1RpbGVLZXkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvaW50ZXJhY3RpdmUvc25hcHBpbmcvZmVhdHVyZVNvdXJjZXMvZmVhdHVyZVNlcnZpY2VTb3VyY2UvRmVhdHVyZVNlcnZpY2VTbmFwcGluZ1NvdXJjZVdvcmtlci5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9mZWF0dXJlU291cmNlcy9mZWF0dXJlU2VydmljZVNvdXJjZS9GZWF0dXJlU2VydmljZVRpbGVDYWNoZS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9mZWF0dXJlU291cmNlcy9mZWF0dXJlU2VydmljZVNvdXJjZS9GZWF0dXJlU2VydmljZVRpbGVTdG9yZS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9mZWF0dXJlU291cmNlcy9mZWF0dXJlU2VydmljZVNvdXJjZS9GZWF0dXJlU2VydmljZVRpbGVkRmV0Y2hlci5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9mZWF0dXJlU291cmNlcy9mZWF0dXJlU2VydmljZVNvdXJjZS9QZW5kaW5nRmVhdHVyZVRpbGUuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvaW50ZXJhY3RpdmUvc25hcHBpbmcvZmVhdHVyZVNvdXJjZXMvc25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25BbGlnbm1lbnQuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvaW50ZXJhY3RpdmUvc25hcHBpbmcvZmVhdHVyZVNvdXJjZXMvc25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25GaWx0ZXIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvaW50ZXJhY3RpdmUvc25hcHBpbmcvZmVhdHVyZVNvdXJjZXMvc3ltYm9sb2d5U25hcHBpbmdDYW5kaWRhdGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBzfWZyb21cIi4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuL0FjY2Vzc29yLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGV9ZnJvbVwiLi9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBpfWZyb21cIi4vYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtsZXQgcj1jbGFzcyBleHRlbmRzIHR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMudXBkYXRpbmc9ITEsdGhpcy5fcGVuZGluZz1bXX1wdXNoKHMsdCl7dGhpcy5fcGVuZGluZy5wdXNoKHtwcm9taXNlOnMsY2FsbGJhY2s6dH0pLDE9PT10aGlzLl9wZW5kaW5nLmxlbmd0aCYmdGhpcy5fcHJvY2VzcygpfV9wcm9jZXNzKCl7aWYoIXRoaXMuX3BlbmRpbmcubGVuZ3RoKXJldHVybiB2b2lkKHRoaXMudXBkYXRpbmc9ITEpO3RoaXMudXBkYXRpbmc9ITA7Y29uc3Qgcz10aGlzLl9wZW5kaW5nWzBdO3MucHJvbWlzZS50aGVuKCh0PT5zLmNhbGxiYWNrKHQpKSkuY2F0Y2goKCgpPT57fSkpLnRoZW4oKCgpPT57dGhpcy5fcGVuZGluZy5zaGlmdCgpLHRoaXMuX3Byb2Nlc3MoKX0pKX19O3MoW2UoKV0sci5wcm90b3R5cGUsXCJ1cGRhdGluZ1wiLHZvaWQgMCkscj1zKFtpKFwiZXNyaS5jb3JlLkFzeW5jU2VxdWVuY2VcIildLHIpO2V4cG9ydHtyIGFzIEFzeW5jU2VxdWVuY2V9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBFOyFmdW5jdGlvbihFKXtFW0UuS0lMT0JZVEVTPTEwMjRdPVwiS0lMT0JZVEVTXCIsRVtFLk1FR0FCWVRFUz0xMDQ4NTc2XT1cIk1FR0FCWVRFU1wiLEVbRS5HSUdBQllURVM9MTA3Mzc0MTgyNF09XCJHSUdBQllURVNcIn0oRXx8KEU9e30pKTtleHBvcnR7RSBhcyBCeXRlU2l6ZVVuaXR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHIocil7cmV0dXJuIDMyK3IubGVuZ3RofWZ1bmN0aW9uIG4ocil7cmV0dXJuIDE2fWZ1bmN0aW9uIHQodCl7aWYoIXQpcmV0dXJuIDA7bGV0IGU9Zjtmb3IoY29uc3QgbyBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkobykpe2NvbnN0IHU9dFtvXTtzd2l0Y2godHlwZW9mIHUpe2Nhc2VcInN0cmluZ1wiOmUrPXIodSk7YnJlYWs7Y2FzZVwibnVtYmVyXCI6ZSs9bigpO2JyZWFrO2Nhc2VcImJvb2xlYW5cIjplKz00fX1yZXR1cm4gZX1mdW5jdGlvbiBlKHIpe2lmKCFyKXJldHVybiAwO2lmKEFycmF5LmlzQXJyYXkocikpcmV0dXJuIG8ocik7bGV0IG49Zjtmb3IoY29uc3QgdCBpbiByKXIuaGFzT3duUHJvcGVydHkodCkmJihuKz11KHJbdF0pKTtyZXR1cm4gbn1mdW5jdGlvbiBvKHIpe2NvbnN0IG49ci5sZW5ndGg7aWYoMD09PW58fFwibnVtYmVyXCI9PXR5cGVvZiByWzBdKXJldHVybiAzMis4Km47bGV0IHQ9aTtmb3IobGV0IGU9MDtlPG47ZSsrKXQrPXUocltlXSk7cmV0dXJuIHR9ZnVuY3Rpb24gdSh0KXtzd2l0Y2godHlwZW9mIHQpe2Nhc2VcIm9iamVjdFwiOnJldHVybiBlKHQpO2Nhc2VcInN0cmluZ1wiOnJldHVybiByKHQpO2Nhc2VcIm51bWJlclwiOnJldHVybiBuKCk7Y2FzZVwiYm9vbGVhblwiOnJldHVybiA0O2RlZmF1bHQ6cmV0dXJuIDh9fWZ1bmN0aW9uIGMocixuKXtyZXR1cm4gaStyLmxlbmd0aCpufWNvbnN0IGY9MzIsaT0zMjtleHBvcnR7dCBhcyBlc3RpbWF0ZUF0dHJpYnV0ZXNPYmplY3RTaXplLGMgYXMgZXN0aW1hdGVGaXhlZEFycmF5U2l6ZSxlIGFzIGVzdGltYXRlTmVzdGVkT2JqZWN0U2l6ZSxuIGFzIGVzdGltYXRlTnVtYmVyQnl0ZVNpemUsciBhcyBlc3RpbWF0ZVN0cmluZ0J5dGVTaXplfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnR7SlNPTlN1cHBvcnQgYXMgb31mcm9tXCIuLi8uLi9jb3JlL0pTT05TdXBwb3J0LmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHJ9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydHtJbnRlZ2VyIGFzIHR9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBzfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjt2YXIgaTtsZXQgbD1pPWNsYXNzIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmNvbHM9bnVsbCx0aGlzLmxldmVsPTAsdGhpcy5sZXZlbFZhbHVlPW51bGwsdGhpcy5vcmlnaW49bnVsbCx0aGlzLnJlc29sdXRpb249MCx0aGlzLnJvd3M9bnVsbCx0aGlzLnNjYWxlPTB9Y2xvbmUoKXtyZXR1cm4gbmV3IGkoe2NvbHM6dGhpcy5jb2xzLGxldmVsOnRoaXMubGV2ZWwsbGV2ZWxWYWx1ZTp0aGlzLmxldmVsVmFsdWUscmVzb2x1dGlvbjp0aGlzLnJlc29sdXRpb24scm93czp0aGlzLnJvd3Msc2NhbGU6dGhpcy5zY2FsZX0pfX07ZShbcih7anNvbjp7d3JpdGU6ITAsb3JpZ2luczp7XCJ3ZWItZG9jdW1lbnRcIjp7cmVhZDohMSx3cml0ZTohMX0sXCJwb3J0YWwtaXRlbVwiOntyZWFkOiExLHdyaXRlOiExfX19fSldLGwucHJvdG90eXBlLFwiY29sc1wiLHZvaWQgMCksZShbcih7dHlwZTp0LGpzb246e3dyaXRlOiEwfX0pXSxsLnByb3RvdHlwZSxcImxldmVsXCIsdm9pZCAwKSxlKFtyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0sbC5wcm90b3R5cGUsXCJsZXZlbFZhbHVlXCIsdm9pZCAwKSxlKFtyKHtqc29uOnt3cml0ZTohMCxvcmlnaW5zOntcIndlYi1kb2N1bWVudFwiOntyZWFkOiExLHdyaXRlOiExfSxcInBvcnRhbC1pdGVtXCI6e3JlYWQ6ITEsd3JpdGU6ITF9fX19KV0sbC5wcm90b3R5cGUsXCJvcmlnaW5cIix2b2lkIDApLGUoW3Ioe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSxsLnByb3RvdHlwZSxcInJlc29sdXRpb25cIix2b2lkIDApLGUoW3Ioe2pzb246e3dyaXRlOiEwLG9yaWdpbnM6e1wid2ViLWRvY3VtZW50XCI6e3JlYWQ6ITEsd3JpdGU6ITF9LFwicG9ydGFsLWl0ZW1cIjp7cmVhZDohMSx3cml0ZTohMX19fX0pXSxsLnByb3RvdHlwZSxcInJvd3NcIix2b2lkIDApLGUoW3Ioe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSxsLnByb3RvdHlwZSxcInNjYWxlXCIsdm9pZCAwKSxsPWk9ZShbcyhcImVzcmkubGF5ZXJzLnN1cHBvcnQuTE9EXCIpXSxsKTtjb25zdCBwPWw7ZXhwb3J0e3AgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e0pTT05NYXAgYXMgdH1mcm9tXCIuLi8uLi9jb3JlL2pzb25NYXAuanNcIjtpbXBvcnR7SlNPTlN1cHBvcnQgYXMgb31mcm9tXCIuLi8uLi9jb3JlL0pTT05TdXBwb3J0LmpzXCI7aW1wb3J0e2dldE1ldGVyc1BlclVuaXRGb3JTUiBhcyByfWZyb21cIi4uLy4uL2NvcmUvdW5pdFV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydHtJbnRlZ2VyIGFzIGl9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtyZWFkZXIgYXMgbH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3JlYWRlci5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBufWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7d3JpdGVyIGFzIGF9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy93cml0ZXIuanNcIjtpbXBvcnQgcCBmcm9tXCIuLi8uLi9nZW9tZXRyeS9Qb2ludC5qc1wiO2ltcG9ydCBjIGZyb21cIi4uLy4uL2dlb21ldHJ5L1NwYXRpYWxSZWZlcmVuY2UuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIHV9ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nUmVjdC5qc1wiO2ltcG9ydHtpc1ZhbGlkIGFzIGYsZ2V0SW5mbyBhcyBoLGlzR2VvZ3JhcGhpYyBhcyBtLGVxdWFscyBhcyBkfWZyb21cIi4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7aW1wb3J0e3Byb2plY3QgYXMgZ31mcm9tXCIuLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3dlYk1lcmNhdG9yVXRpbHMuanNcIjtpbXBvcnQgeSBmcm9tXCIuL0xPRC5qc1wiO2ltcG9ydHtUaWxlS2V5IGFzIHZ9ZnJvbVwiLi9UaWxlS2V5LmpzXCI7dmFyIHc7Y29uc3QgeD1uZXcgdCh7UE5HOlwicG5nXCIsUE5HODpcInBuZzhcIixQTkcyNDpcInBuZzI0XCIsUE5HMzI6XCJwbmczMlwiLEpQRUc6XCJqcGdcIixKUEc6XCJqcGdcIixESUI6XCJkaWJcIixUSUZGOlwidGlmZlwiLEVNRjpcImVtZlwiLFBTOlwicHNcIixQREY6XCJwZGZcIixHSUY6XCJnaWZcIixTVkc6XCJzdmdcIixTVkdaOlwic3ZnelwiLE1peGVkOlwibWl4ZWRcIixNSVhFRDpcIm1peGVkXCIsTEVSQzpcImxlcmNcIixMRVJDMkQ6XCJsZXJjMmRcIixSQVc6XCJyYXdcIixwYmY6XCJwYmZcIn0pO2xldCBPPXc9Y2xhc3MgZXh0ZW5kcyBve3N0YXRpYyBjcmVhdGUoZT17fSl7Y29uc3R7cmVzb2x1dGlvbkZhY3Rvcjp0PTEsc2NhbGVzOm8sc2l6ZTpzPTI1NixzcGF0aWFsUmVmZXJlbmNlOmk9Yy5XZWJNZXJjYXRvcixudW1MT0RzOmw9MjR9PWU7aWYoIWYoaSkpe2NvbnN0IGU9W107aWYobylmb3IobGV0IHQ9MDt0PG8ubGVuZ3RoO3QrKyl7Y29uc3Qgcj1vW3RdO2UucHVzaChuZXcgeSh7bGV2ZWw6dCxzY2FsZTpyLHJlc29sdXRpb246cn0pKX1lbHNle2xldCB0PTVlLTQ7Zm9yKGxldCBvPWwtMTtvPj0wO28tLSllLnVuc2hpZnQobmV3IHkoe2xldmVsOm8sc2NhbGU6dCxyZXNvbHV0aW9uOnR9KSksdCo9Mn1yZXR1cm4gbmV3IHcoe2RwaTo5Nixsb2RzOmUsb3JpZ2luOm5ldyBwKDAsMCxpKSxzaXplOltzLHNdLHNwYXRpYWxSZWZlcmVuY2U6aX0pfWNvbnN0IG49aChpKSxhPWUub3JpZ2luP25ldyBwKHt4OmUub3JpZ2luLngseTplLm9yaWdpbi55LHNwYXRpYWxSZWZlcmVuY2U6aX0pOm5ldyBwKG4/e3g6bi5vcmlnaW5bMF0seTpuLm9yaWdpblsxXSxzcGF0aWFsUmVmZXJlbmNlOml9Ont4OjAseTowLHNwYXRpYWxSZWZlcmVuY2U6aX0pLHU9OTYsZD0xLyhyKGkpKjM5LjM3KnUpLGc9W107aWYobylmb3IobGV0IHI9MDtyPG8ubGVuZ3RoO3IrKyl7Y29uc3QgZT1vW3JdLHQ9ZSpkO2cucHVzaChuZXcgeSh7bGV2ZWw6cixzY2FsZTplLHJlc29sdXRpb246dH0pKX1lbHNle2xldCBlPW0oaSk/NTEyL3MqNTkxNjU3NTI3LjU5MTcwOTQ6MjU2L3MqNTkxNjU3NTI3LjU5MTU1NTtjb25zdCBvPU1hdGguY2VpbChsL3QpO2cucHVzaChuZXcgeSh7bGV2ZWw6MCxzY2FsZTplLHJlc29sdXRpb246ZSpkfSkpO2ZvcihsZXQgcj0xO3I8bztyKyspe2NvbnN0IG89ZS8yKip0LHM9bypkO2cucHVzaChuZXcgeSh7bGV2ZWw6cixzY2FsZTpvLHJlc29sdXRpb246c30pKSxlPW99fXJldHVybiBuZXcgdyh7ZHBpOnUsbG9kczpnLG9yaWdpbjphLHNpemU6W3Msc10sc3BhdGlhbFJlZmVyZW5jZTppfSl9Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5kcGk9OTYsdGhpcy5mb3JtYXQ9bnVsbCx0aGlzLm9yaWdpbj1udWxsLHRoaXMuc2l6ZT1udWxsLHRoaXMuc3BhdGlhbFJlZmVyZW5jZT1udWxsfWdldCBpc1dyYXBwYWJsZSgpe2NvbnN0e3NwYXRpYWxSZWZlcmVuY2U6ZSxvcmlnaW46dH09dGhpcztpZihlJiZ0KXtjb25zdCBvPWgoZSk7cmV0dXJuIGUuaXNXcmFwcGFibGUmJiEhbyYmTWF0aC5hYnMoby5vcmlnaW5bMF0tdC54KTw9by5keH1yZXR1cm4hMX1yZWFkT3JpZ2luKGUsdCl7cmV0dXJuIHAuZnJvbUpTT04oe3NwYXRpYWxSZWZlcmVuY2U6dC5zcGF0aWFsUmVmZXJlbmNlLC4uLmV9KX1zZXQgbG9kcyhlKXtsZXQgdD0wLG89MDtjb25zdCByPVtdLHM9dGhpcy5fbGV2ZWxUb0xPRD17fTtlJiYodD0tMS8wLG89MS8wLGUuZm9yRWFjaCgoZT0+e3IucHVzaChlLnNjYWxlKSx0PWUuc2NhbGU+dD9lLnNjYWxlOnQsbz1lLnNjYWxlPG8/ZS5zY2FsZTpvLHNbZS5sZXZlbF09ZX0pKSksdGhpcy5fc2V0KFwic2NhbGVzXCIsciksdGhpcy5fc2V0KFwibG9kc1wiLGUpLHRoaXMuX2luaXRpYWxpemVVcHNhbXBsZUxldmVscygpfXJlYWRTaXplKGUsdCl7cmV0dXJuW3QuY29scyx0LnJvd3NdfXdyaXRlU2l6ZShlLHQpe3QuY29scz1lWzBdLHQucm93cz1lWzFdfXpvb21Ub1NjYWxlKGUpe2NvbnN0IHQ9dGhpcy5zY2FsZXM7aWYoZTw9MClyZXR1cm4gdFswXTtpZihlPj10Lmxlbmd0aC0xKXJldHVybiB0W3QubGVuZ3RoLTFdO2NvbnN0IG89TWF0aC5mbG9vcihlKSxyPW8rMTtyZXR1cm4gdFtvXS8odFtvXS90W3JdKSoqKGUtbyl9c2NhbGVUb1pvb20oZSl7Y29uc3QgdD10aGlzLnNjYWxlcyxvPXQubGVuZ3RoLTE7bGV0IHI9MDtmb3IoO3I8bztyKyspe2NvbnN0IG89dFtyXSxzPXRbcisxXTtpZihvPD1lKXJldHVybiByO2lmKHM9PT1lKXJldHVybiByKzE7aWYobz5lJiZzPGUpcmV0dXJuIHIrTWF0aC5sb2coby9lKS9NYXRoLmxvZyhvL3MpfXJldHVybiByfXNuYXBTY2FsZShlLHQ9Ljk1KXtjb25zdCBvPXRoaXMuc2NhbGVUb1pvb20oZSk7cmV0dXJuIG8lTWF0aC5mbG9vcihvKT49dD90aGlzLnpvb21Ub1NjYWxlKE1hdGguY2VpbChvKSk6dGhpcy56b29tVG9TY2FsZShNYXRoLmZsb29yKG8pKX10aWxlQXQoZSx0LG8scil7Y29uc3Qgcz10aGlzLmxvZEF0KGUpO2lmKCFzKXJldHVybiBudWxsO2xldCBpLGw7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpaT10LGw9bztlbHNlIGlmKGQodC5zcGF0aWFsUmVmZXJlbmNlLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSkpaT10LngsbD10Lnkscj1vO2Vsc2V7Y29uc3QgZT1nKHQsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTtpZihudWxsPT1lKXJldHVybiBudWxsO2k9ZS54LGw9ZS55LHI9b31jb25zdCBuPXMucmVzb2x1dGlvbip0aGlzLnNpemVbMF0sYT1zLnJlc29sdXRpb24qdGhpcy5zaXplWzFdO3JldHVybiByfHwocj1uZXcgdihudWxsLDAsMCwwLHUoKSkpLHIubGV2ZWw9ZSxyLnJvdz1NYXRoLmZsb29yKCh0aGlzLm9yaWdpbi55LWwpL2ErLjAwMSksci5jb2w9TWF0aC5mbG9vcigoaS10aGlzLm9yaWdpbi54KS9uKy4wMDEpLHRoaXMudXBkYXRlVGlsZUluZm8ocikscn11cGRhdGVUaWxlSW5mbyhlLHQ9dy5FeHRyYXBvbGF0ZU9wdGlvbnMuTk9ORSl7bGV0IG89dGhpcy5sb2RBdChlLmxldmVsKTtpZighbyYmdD09PXcuRXh0cmFwb2xhdGVPcHRpb25zLlBPV0VSX09GX1RXTyl7Y29uc3QgdD10aGlzLmxvZHNbdGhpcy5sb2RzLmxlbmd0aC0xXTt0LmxldmVsPGUubGV2ZWwmJihvPXQpfWlmKCFvKXJldHVybjtjb25zdCByPWUubGV2ZWwtby5sZXZlbCxzPW8ucmVzb2x1dGlvbip0aGlzLnNpemVbMF0vMioqcixpPW8ucmVzb2x1dGlvbip0aGlzLnNpemVbMV0vMioqcjtlLmlkPWAke2UubGV2ZWx9LyR7ZS5yb3d9LyR7ZS5jb2x9YCxlLmV4dGVudHx8KGUuZXh0ZW50PXUoKSksZS5leHRlbnRbMF09dGhpcy5vcmlnaW4ueCtlLmNvbCpzLGUuZXh0ZW50WzFdPXRoaXMub3JpZ2luLnktKGUucm93KzEpKmksZS5leHRlbnRbMl09ZS5leHRlbnRbMF0rcyxlLmV4dGVudFszXT1lLmV4dGVudFsxXStpfXVwc2FtcGxlVGlsZShlKXtjb25zdCB0PXRoaXMuX3Vwc2FtcGxlTGV2ZWxzW2UubGV2ZWxdO3JldHVybiEoIXR8fC0xPT09dC5wYXJlbnRMZXZlbCkmJihlLmxldmVsPXQucGFyZW50TGV2ZWwsZS5yb3c9TWF0aC5mbG9vcihlLnJvdy90LmZhY3RvcisuMDAxKSxlLmNvbD1NYXRoLmZsb29yKGUuY29sL3QuZmFjdG9yKy4wMDEpLHRoaXMudXBkYXRlVGlsZUluZm8oZSksITApfWdldFRpbGVCb3VuZHMoZSx0KXtjb25zdCBvPXRoaXMubG9kQXQodC5sZXZlbCk7aWYobnVsbD09bylyZXR1cm4gbnVsbDtjb25zdHtyZXNvbHV0aW9uOnJ9PW8scz1yKnRoaXMuc2l6ZVswXSxpPXIqdGhpcy5zaXplWzFdO3JldHVybiBlWzBdPXRoaXMub3JpZ2luLngrdC5jb2wqcyxlWzFdPXRoaXMub3JpZ2luLnktKHQucm93KzEpKmksZVsyXT1lWzBdK3MsZVszXT1lWzFdK2ksZX1sb2RBdChlKXtyZXR1cm4gdGhpcy5fbGV2ZWxUb0xPRD8uW2VdPz9udWxsfWNsb25lKCl7cmV0dXJuIHcuZnJvbUpTT04odGhpcy53cml0ZSh7fSkpfWdldE9yQ3JlYXRlQ29tcGF0aWJsZShlLHQpe2lmKDI1Nj09PXRoaXMuc2l6ZVswXSYmMjU2PT09dGhpcy5zaXplWzFdKXJldHVybiAyNTY9PT1lP3RoaXM6bnVsbDtjb25zdCBvPVtdLHI9dGhpcy5sb2RzLmxlbmd0aDtmb3IobGV0IHM9MDtzPHI7cysrKXtjb25zdCBlPXRoaXMubG9kc1tzXSxyPWUucmVzb2x1dGlvbip0O28ucHVzaChuZXcgeSh7bGV2ZWw6ZS5sZXZlbCxzY2FsZTplLnNjYWxlLHJlc29sdXRpb246cn0pKX1yZXR1cm4gbmV3IHcoe3NpemU6W2UsZV0sZHBpOnRoaXMuZHBpLGZvcm1hdDp0aGlzLmZvcm1hdCxjb21wcmVzc2lvblF1YWxpdHk6dGhpcy5jb21wcmVzc2lvblF1YWxpdHksb3JpZ2luOnRoaXMub3JpZ2luLHNwYXRpYWxSZWZlcmVuY2U6dGhpcy5zcGF0aWFsUmVmZXJlbmNlLGxvZHM6b30pfV9pbml0aWFsaXplVXBzYW1wbGVMZXZlbHMoKXtjb25zdCBlPXRoaXMubG9kczt0aGlzLl91cHNhbXBsZUxldmVscz1bXTtsZXQgdD1udWxsO2ZvcihsZXQgbz0wO288ZS5sZW5ndGg7bysrKXtjb25zdCByPWVbb107dGhpcy5fdXBzYW1wbGVMZXZlbHNbci5sZXZlbF09e3BhcmVudExldmVsOnQ/dC5sZXZlbDotMSxmYWN0b3I6dD90LnJlc29sdXRpb24vci5yZXNvbHV0aW9uOjB9LHQ9cn19fTtlKFtzKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTohMH19KV0sTy5wcm90b3R5cGUsXCJjb21wcmVzc2lvblF1YWxpdHlcIix2b2lkIDApLGUoW3Moe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSxPLnByb3RvdHlwZSxcImRwaVwiLHZvaWQgMCksZShbcyh7dHlwZTpTdHJpbmcsanNvbjp7cmVhZDp4LnJlYWQsd3JpdGU6eC53cml0ZSxvcmlnaW5zOntcIndlYi1zY2VuZVwiOntyZWFkOiExLHdyaXRlOiExfX19fSldLE8ucHJvdG90eXBlLFwiZm9ybWF0XCIsdm9pZCAwKSxlKFtzKHtyZWFkT25seTohMH0pXSxPLnByb3RvdHlwZSxcImlzV3JhcHBhYmxlXCIsbnVsbCksZShbcyh7dHlwZTpwLGpzb246e3dyaXRlOiEwfX0pXSxPLnByb3RvdHlwZSxcIm9yaWdpblwiLHZvaWQgMCksZShbbChcIm9yaWdpblwiKV0sTy5wcm90b3R5cGUsXCJyZWFkT3JpZ2luXCIsbnVsbCksZShbcyh7dHlwZTpbeV0sdmFsdWU6bnVsbCxqc29uOnt3cml0ZTohMH19KV0sTy5wcm90b3R5cGUsXCJsb2RzXCIsbnVsbCksZShbcyh7cmVhZE9ubHk6ITB9KV0sTy5wcm90b3R5cGUsXCJzY2FsZXNcIix2b2lkIDApLGUoW3Moe2Nhc3Q6ZT0+QXJyYXkuaXNBcnJheShlKT9lOlwibnVtYmVyXCI9PXR5cGVvZiBlP1tlLGVdOlsyNTYsMjU2XX0pXSxPLnByb3RvdHlwZSxcInNpemVcIix2b2lkIDApLGUoW2woXCJzaXplXCIsW1wicm93c1wiLFwiY29sc1wiXSldLE8ucHJvdG90eXBlLFwicmVhZFNpemVcIixudWxsKSxlKFthKFwic2l6ZVwiLHtjb2xzOnt0eXBlOml9LHJvd3M6e3R5cGU6aX19KV0sTy5wcm90b3R5cGUsXCJ3cml0ZVNpemVcIixudWxsKSxlKFtzKHt0eXBlOmMsanNvbjp7d3JpdGU6ITB9fSldLE8ucHJvdG90eXBlLFwic3BhdGlhbFJlZmVyZW5jZVwiLHZvaWQgMCksTz13PWUoW24oXCJlc3JpLmxheWVycy5zdXBwb3J0LlRpbGVJbmZvXCIpXSxPKSxmdW5jdGlvbihlKXt2YXIgdDsodD1lLkV4dHJhcG9sYXRlT3B0aW9uc3x8KGUuRXh0cmFwb2xhdGVPcHRpb25zPXt9KSlbdC5OT05FPTBdPVwiTk9ORVwiLHRbdC5QT1dFUl9PRl9UV089MV09XCJQT1dFUl9PRl9UV09cIn0oT3x8KE89e30pKTtjb25zdCBqPU87ZXhwb3J0e2ogYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY2xhc3MgdHtjb25zdHJ1Y3Rvcih0LHMsaSxvLGU9dm9pZCAwKXt0aGlzLmlkPXQsdGhpcy5sZXZlbD1zLHRoaXMucm93PWksdGhpcy5jb2w9byx0aGlzLmV4dGVudD1lfX1leHBvcnR7dCBhcyBUaWxlS2V5fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL0V2ZW50ZWQuanNcIjtpbXBvcnQgaSBmcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL0hhbmRsZXMuanNcIjtpbXBvcnR7Y3JlYXRlUmVzb2x2ZXIgYXMgcix0aHJvd0lmQWJvcnRlZCBhcyBzfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e3dhdGNoIGFzIG4sd2hlbk9uY2UgYXMgYSxzeW5jIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGx9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBkfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7V2F0Y2hVcGRhdGluZ1RyYWNraW5nIGFzIHB9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9zdXBwb3J0L1dhdGNoVXBkYXRpbmdUcmFja2luZy5qc1wiO2ltcG9ydCB1IGZyb21cIi4uLy4uLy4uLy4uLy4uL2dlb21ldHJ5L1NwYXRpYWxSZWZlcmVuY2UuanNcIjtpbXBvcnQgYyBmcm9tXCIuLi8uLi8uLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvZGF0YS9GZWF0dXJlU3RvcmUuanNcIjtpbXBvcnR7UXVlcnlFbmdpbmUgYXMgaH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvZGF0YS9RdWVyeUVuZ2luZS5qc1wiO2ltcG9ydCBnIGZyb21cIi4uLy4uLy4uLy4uLy4uL2xheWVycy9zdXBwb3J0L1RpbGVJbmZvLmpzXCI7aW1wb3J0IGYgZnJvbVwiLi4vLi4vLi4vLi4vLi4vcmVzdC9zdXBwb3J0L1F1ZXJ5LmpzXCI7aW1wb3J0IG0gZnJvbVwiLi4vLi4vLi4vLi4vLi4vc3ltYm9scy9zdXBwb3J0L0VsZXZhdGlvbkluZm8uanNcIjtpbXBvcnR7Z2V0U25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25BbGlnbmVyIGFzIHl9ZnJvbVwiLi4vc25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25BbGlnbm1lbnQuanNcIjtpbXBvcnR7Z2V0U25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25GaWx0ZXIgYXMgX31mcm9tXCIuLi9zbmFwcGluZ0NhbmRpZGF0ZUVsZXZhdGlvbkZpbHRlci5qc1wiO2ltcG9ydHtnZXRTeW1ib2xvZ3lTbmFwcGluZ0NhbmRpZGF0ZXNGZXRjaGVyIGFzIFN9ZnJvbVwiLi4vc3ltYm9sb2d5U25hcHBpbmdDYW5kaWRhdGVzLmpzXCI7aW1wb3J0e0ZlYXR1cmVTZXJ2aWNlVGlsZWRGZXRjaGVyIGFzIHZ9ZnJvbVwiLi9GZWF0dXJlU2VydmljZVRpbGVkRmV0Y2hlci5qc1wiO2ltcG9ydHtGZWF0dXJlU2VydmljZVRpbGVTdG9yZSBhcyBGfWZyb21cIi4vRmVhdHVyZVNlcnZpY2VUaWxlU3RvcmUuanNcIjtsZXQgST1jbGFzcyBleHRlbmRzIHQuRXZlbnRlZEFjY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl9pc0luaXRpYWxpemluZz0hMCx0aGlzLnJlbW90ZUNsaWVudD1udWxsLHRoaXMuX3doZW5TZXR1cD1yKCksdGhpcy5fZWxldmF0aW9uQWxpZ25lcj15KCksdGhpcy5fZWxldmF0aW9uRmlsdGVyPV8oKSx0aGlzLl9zeW1ib2xvZ3lDYW5kaWRhdGVzRmV0Y2hlcj1TKCksdGhpcy5faGFuZGxlcz1uZXcgaSx0aGlzLl91cGRhdGluZ0hhbmRsZXM9bmV3IHAsdGhpcy5fZWRpdHNVcGRhdGluZ0hhbmRsZXM9bmV3IHAsdGhpcy5fcGVuZGluZ0FwcGx5RWRpdHM9bmV3IE1hcCx0aGlzLl9hbGlnblBvaW50c0luRmVhdHVyZXM9YXN5bmMoZSx0KT0+e2NvbnN0IGk9e3BvaW50czplfSxyPWF3YWl0IHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcImFsaWduRWxldmF0aW9uXCIsaSx7c2lnbmFsOnR9KTtyZXR1cm4gcyh0KSxyfSx0aGlzLl9nZXRTeW1ib2xvZ3lDYW5kaWRhdGVzPWFzeW5jKGUsdCk9Pntjb25zdCBpPXtjYW5kaWRhdGVzOmUsc3BhdGlhbFJlZmVyZW5jZTp0aGlzLl9zcGF0aWFsUmVmZXJlbmNlLnRvSlNPTigpfSxyPWF3YWl0IHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcImdldFN5bWJvbG9neUNhbmRpZGF0ZXNcIixpLHtzaWduYWw6dH0pO3JldHVybiBzKHQpLHJ9fWdldCB1cGRhdGluZygpe3JldHVybiB0aGlzLnVwZGF0aW5nRXhjbHVkaW5nRWRpdHN8fHRoaXMuX2VkaXRzVXBkYXRpbmdIYW5kbGVzLnVwZGF0aW5nfHx0aGlzLl9mZWF0dXJlRmV0Y2hlci51cGRhdGluZ31nZXQgdXBkYXRpbmdFeGNsdWRpbmdFZGl0cygpe3JldHVybiB0aGlzLl9mZWF0dXJlRmV0Y2hlci51cGRhdGluZ0V4Y2x1ZGluZ0VkaXRzfHx0aGlzLl9pc0luaXRpYWxpemluZ3x8dGhpcy5fdXBkYXRpbmdIYW5kbGVzLnVwZGF0aW5nfWRlc3Ryb3koKXt0aGlzLl9mZWF0dXJlRmV0Y2hlcj8uZGVzdHJveSgpLHRoaXMuX3F1ZXJ5RW5naW5lPy5kZXN0cm95KCksdGhpcy5fZmVhdHVyZVN0b3JlPy5jbGVhcigpLHRoaXMuX2hhbmRsZXM/LmRlc3Ryb3koKX1hc3luYyBzZXR1cChlKXtpZih0aGlzLmRlc3Ryb3llZClyZXR1cm57cmVzdWx0Ont9fTtjb25zdHtnZW9tZXRyeVR5cGU6dCxvYmplY3RJZEZpZWxkOmksdGltZUluZm86cixmaWVsZHM6c309ZS5zZXJ2aWNlSW5mbyx7aGFzWjphfT1lLGw9dS5mcm9tSlNPTihlLnNwYXRpYWxSZWZlcmVuY2UpO3RoaXMuX3NwYXRpYWxSZWZlcmVuY2U9bCx0aGlzLl9mZWF0dXJlU3RvcmU9bmV3IGMoey4uLmUuc2VydmljZUluZm8saGFzWjphLGhhc006ITF9KSx0aGlzLl9xdWVyeUVuZ2luZT1uZXcgaCh7c3BhdGlhbFJlZmVyZW5jZTplLnNwYXRpYWxSZWZlcmVuY2UsZmVhdHVyZVN0b3JlOnRoaXMuX2ZlYXR1cmVTdG9yZSxnZW9tZXRyeVR5cGU6dCxmaWVsZHM6cyxoYXNaOmEsaGFzTTohMSxvYmplY3RJZEZpZWxkOmksdGltZUluZm86cn0pLHRoaXMuX2ZlYXR1cmVGZXRjaGVyPW5ldyB2KHtzdG9yZTpuZXcgRih7ZmVhdHVyZVN0b3JlOnRoaXMuX2ZlYXR1cmVTdG9yZX0pLHVybDplLnNlcnZpY2VJbmZvLnVybCxvYmplY3RJZEZpZWxkOmUuc2VydmljZUluZm8ub2JqZWN0SWRGaWVsZCxnbG9iYWxJZEZpZWxkOmUuc2VydmljZUluZm8uZ2xvYmFsSWRGaWVsZCxjYXBhYmlsaXRpZXM6ZS5zZXJ2aWNlSW5mby5jYXBhYmlsaXRpZXMsc3BhdGlhbFJlZmVyZW5jZTpsLHNvdXJjZVNwYXRpYWxSZWZlcmVuY2U6dS5mcm9tSlNPTihlLnNlcnZpY2VJbmZvLnNwYXRpYWxSZWZlcmVuY2UpfSk7Y29uc3QgZD1cIjNkXCI9PT1lLmNvbmZpZ3VyYXRpb24udmlld1R5cGU7cmV0dXJuIHRoaXMuX2VsZXZhdGlvbkFsaWduZXI9eShkLHtlbGV2YXRpb25JbmZvOm51bGwhPWUuZWxldmF0aW9uSW5mbz9tLmZyb21KU09OKGUuZWxldmF0aW9uSW5mbyk6bnVsbCxhbGlnblBvaW50c0luRmVhdHVyZXM6dGhpcy5fYWxpZ25Qb2ludHNJbkZlYXR1cmVzLHNwYXRpYWxSZWZlcmVuY2U6bH0pLHRoaXMuX2VsZXZhdGlvbkZpbHRlcj1fKGQpLHRoaXMuX2hhbmRsZXMuYWRkKFtuKCgoKT0+dGhpcy5fZmVhdHVyZUZldGNoZXIuYXZhaWxhYmlsaXR5KSwoZT0+dGhpcy5lbWl0KFwibm90aWZ5LWF2YWlsYWJpbGl0eVwiLHthdmFpbGFiaWxpdHk6ZX0pKSxvKSxuKCgoKT0+dGhpcy51cGRhdGluZyksKCgpPT50aGlzLl9ub3RpZnlVcGRhdGluZygpKSldKSx0aGlzLl93aGVuU2V0dXAucmVzb2x2ZSgpLHRoaXMuX2lzSW5pdGlhbGl6aW5nPSExLHRoaXMuY29uZmlndXJlKGUuY29uZmlndXJhdGlvbil9YXN5bmMgY29uZmlndXJlKGUpe3JldHVybiBhd2FpdCB0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLl93aGVuU2V0dXAucHJvbWlzZSksdGhpcy5fdXBkYXRlRmVhdHVyZUZldGNoZXJDb25maWd1cmF0aW9uKGUpLHtyZXN1bHQ6e319fWFzeW5jIGZldGNoQ2FuZGlkYXRlcyhlLHQpe2F3YWl0IHRoaXMuX3doZW5TZXR1cC5wcm9taXNlLHModCk7Y29uc3QgaT1FKGUpLHI9bnVsbCE9dD90LnNpZ25hbDpudWxsLG49YXdhaXQgdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9yU25hcHBpbmcoaSxyKTtzKHIpO2NvbnN0IGE9YXdhaXQgdGhpcy5fZWxldmF0aW9uQWxpZ25lci5hbGlnbkNhbmRpZGF0ZXMobi5jYW5kaWRhdGVzLHIpO3Mocik7Y29uc3Qgbz1hd2FpdCB0aGlzLl9zeW1ib2xvZ3lDYW5kaWRhdGVzRmV0Y2hlci5mZXRjaChhLHIpO3Mocik7Y29uc3QgbD0wPT09by5sZW5ndGg/YTphLmNvbmNhdChvKTtyZXR1cm57cmVzdWx0OntjYW5kaWRhdGVzOnRoaXMuX2VsZXZhdGlvbkZpbHRlci5maWx0ZXIoaSxsKX19fWFzeW5jIHVwZGF0ZVRpbGVzKGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGRQcm9taXNlKHRoaXMuX3doZW5TZXR1cC5wcm9taXNlKSxzKHQpLHRoaXMuX2ZlYXR1cmVGZXRjaGVyLnRpbGVTaXplPWUudGlsZVNpemUsdGhpcy5fZmVhdHVyZUZldGNoZXIudGlsZXNPZkludGVyZXN0PWUudGlsZXMsdGhpcy5fZmVhdHVyZUZldGNoZXIudGlsZUluZm89bnVsbCE9ZS50aWxlSW5mbz9nLmZyb21KU09OKGUudGlsZUluZm8pOm51bGwsYn1hc3luYyByZWZyZXNoKGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGRQcm9taXNlKHRoaXMuX3doZW5TZXR1cC5wcm9taXNlKSxzKHQpLHRoaXMuX2ZlYXR1cmVGZXRjaGVyLnJlZnJlc2goKSxifWFzeW5jIHdoZW5Ob3RVcGRhdGluZyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLl93aGVuU2V0dXAucHJvbWlzZSkscyh0KSxhd2FpdCBhKCgoKT0+IXRoaXMudXBkYXRpbmdFeGNsdWRpbmdFZGl0cyksdCkscyh0KSxifWFzeW5jIGdldERlYnVnSW5mbyhlLHQpe3JldHVybiBzKHQpLHtyZXN1bHQ6dGhpcy5fZmVhdHVyZUZldGNoZXIuZGVidWdJbmZvfX1hc3luYyBiZWdpbkFwcGx5RWRpdHMoZSx0KXt0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLl93aGVuU2V0dXAucHJvbWlzZSkscyh0KTtjb25zdCBpPXIoKTtyZXR1cm4gdGhpcy5fcGVuZGluZ0FwcGx5RWRpdHMuc2V0KGUuaWQsaSksdGhpcy5fZmVhdHVyZUZldGNoZXIuYXBwbHlFZGl0cyhpLnByb21pc2UpLHRoaXMuX2VkaXRzVXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UoaS5wcm9taXNlKSxifWFzeW5jIGVuZEFwcGx5RWRpdHMoZSx0KXtjb25zdCBpPXRoaXMuX3BlbmRpbmdBcHBseUVkaXRzLmdldChlLmlkKTtyZXR1cm4gaSYmaS5yZXNvbHZlKGUuZWRpdHMpLHModCksYn1hc3luYyBub3RpZnlFbGV2YXRpb25Tb3VyY2VDaGFuZ2UoZSx0KXtyZXR1cm4gdGhpcy5fZWxldmF0aW9uQWxpZ25lci5ub3RpZnlFbGV2YXRpb25Tb3VyY2VDaGFuZ2UoKSxifWFzeW5jIG5vdGlmeVN5bWJvbG9neUNoYW5nZShlLHQpe3JldHVybiB0aGlzLl9zeW1ib2xvZ3lDYW5kaWRhdGVzRmV0Y2hlci5ub3RpZnlTeW1ib2xvZ3lDaGFuZ2UoKSxifWFzeW5jIHNldFN5bWJvbG9neVNuYXBwaW5nU3VwcG9ydGVkKGUpe3JldHVybiB0aGlzLl9zeW1ib2xvZ3lDYW5kaWRhdGVzRmV0Y2hlcj1TKGUsdGhpcy5fZ2V0U3ltYm9sb2d5Q2FuZGlkYXRlcyksYn1fdXBkYXRlRmVhdHVyZUZldGNoZXJDb25maWd1cmF0aW9uKGUpe3RoaXMuX2ZlYXR1cmVGZXRjaGVyLmZpbHRlcj1udWxsIT1lLmZpbHRlcj9mLmZyb21KU09OKGUuZmlsdGVyKTpudWxsLHRoaXMuX2ZlYXR1cmVGZXRjaGVyLmN1c3RvbVBhcmFtZXRlcnM9ZS5jdXN0b21QYXJhbWV0ZXJzfV9ub3RpZnlVcGRhdGluZygpe3RoaXMuZW1pdChcIm5vdGlmeS11cGRhdGluZ1wiLHt1cGRhdGluZzp0aGlzLnVwZGF0aW5nfSl9fTtlKFtsKHtyZWFkT25seTohMH0pXSxJLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sSS5wcm90b3R5cGUsXCJ1cGRhdGluZ0V4Y2x1ZGluZ0VkaXRzXCIsbnVsbCksZShbbCgpXSxJLnByb3RvdHlwZSxcIl9pc0luaXRpYWxpemluZ1wiLHZvaWQgMCksST1lKFtkKFwiZXNyaS52aWV3cy5pbnRlcmFjdGl2ZS5zbmFwcGluZy5mZWF0dXJlU291cmNlcy5mZWF0dXJlU2VydmljZVNvdXJjZS5GZWF0dXJlU2VydmljZVNuYXBwaW5nU291cmNlV29ya2VyXCIpXSxJKTtjb25zdCB3PUk7ZnVuY3Rpb24gRShlKXtyZXR1cm57cG9pbnQ6ZS5wb2ludCxtb2RlOmUubW9kZSxkaXN0YW5jZTplLmRpc3RhbmNlLHJldHVybkVkZ2U6ZS5yZXR1cm5FZGdlLHJldHVyblZlcnRleDplLnJldHVyblZlcnRleCxxdWVyeTpudWxsIT1lLmZpbHRlcj9lLmZpbHRlcjp7d2hlcmU6XCIxPTFcIn19fWNvbnN0IGI9e3Jlc3VsdDp7fX07ZXhwb3J0e3cgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY2xhc3MgdHtjb25zdHJ1Y3Rvcigpe3RoaXMuX3N0b3JlPW5ldyBNYXAsdGhpcy5fYnl0ZVNpemU9MH1zZXQodCxlKXt0aGlzLmRlbGV0ZSh0KSx0aGlzLl9zdG9yZS5zZXQodCxlKSx0aGlzLl9ieXRlU2l6ZSs9ZS5ieXRlU2l6ZX1kZWxldGUodCl7Y29uc3QgZT10aGlzLl9zdG9yZS5nZXQodCk7cmV0dXJuISF0aGlzLl9zdG9yZS5kZWxldGUodCkmJihudWxsIT1lJiYodGhpcy5fYnl0ZVNpemUtPWUuYnl0ZVNpemUpLCEwKX1nZXQodCl7cmV0dXJuIHRoaXMuX3VzZWQodCksdGhpcy5fc3RvcmUuZ2V0KHQpfWhhcyh0KXtyZXR1cm4gdGhpcy5fdXNlZCh0KSx0aGlzLl9zdG9yZS5oYXModCl9Y2xlYXIoKXt0aGlzLl9zdG9yZS5jbGVhcigpfWFwcGx5Qnl0ZVNpemVMaW1pdCh0LGUpe2Zvcihjb25zdFtzLHJdb2YgdGhpcy5fc3RvcmUpe2lmKHRoaXMuX2J5dGVTaXplPD10KWJyZWFrO3RoaXMuZGVsZXRlKHMpLGUocil9fXZhbHVlcygpe3JldHVybiB0aGlzLl9zdG9yZS52YWx1ZXMoKX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzLl9zdG9yZVtTeW1ib2wuaXRlcmF0b3JdKCl9X3VzZWQodCl7Y29uc3QgZT10aGlzLl9zdG9yZS5nZXQodCk7ZSYmKHRoaXMuX3N0b3JlLmRlbGV0ZSh0KSx0aGlzLl9zdG9yZS5zZXQodCxlKSl9fWV4cG9ydHt0IGFzIEZlYXR1cmVTZXJ2aWNlVGlsZUNhY2hlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0e2VzdGltYXRlQXR0cmlidXRlc09iamVjdFNpemUgYXMgcyxlc3RpbWF0ZUZpeGVkQXJyYXlTaXplIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9ieXRlU2l6ZUVzdGltYXRpb25zLmpzXCI7aW1wb3J0e0J5dGVTaXplVW5pdCBhcyByfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvQnl0ZVNpemVVbml0LmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBufWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGwsaW50ZXJzZWN0cyBhcyBhLGZyb21FeHRlbnQgYXMgYyxhcmVhIGFzIHV9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nUmVjdC5qc1wiO2ltcG9ydHtnZXRCb3VuZHNPcHRpbWl6ZWRHZW9tZXRyeSBhcyBofWZyb21cIi4uLy4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9mZWF0dXJlQ29udmVyc2lvblV0aWxzLmpzXCI7aW1wb3J0e0JvdW5kc1N0b3JlIGFzIGR9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2RhdGEvQm91bmRzU3RvcmUuanNcIjtpbXBvcnQgZiBmcm9tXCIuLi8uLi8uLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9UaWxlSW5mby5qc1wiO2ltcG9ydHtUaWxlS2V5IGFzIF99ZnJvbVwiLi4vLi4vLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvVGlsZUtleS5qc1wiO2ltcG9ydHtleGVjdXRlUXVlcnlGb3JDb3VudCBhcyBwfWZyb21cIi4uLy4uLy4uLy4uLy4uL3Jlc3QvcXVlcnkvb3BlcmF0aW9ucy9xdWVyeS5qc1wiO2ltcG9ydHtGZWF0dXJlU2VydmljZVRpbGVDYWNoZSBhcyBtfWZyb21cIi4vRmVhdHVyZVNlcnZpY2VUaWxlQ2FjaGUuanNcIjtsZXQgZz1jbGFzcyBleHRlbmRzIHR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy50aWxlSW5mbz1udWxsLHRoaXMuZXh0ZW50PW51bGwsdGhpcy5tYXhpbXVtQnl0ZVNpemU9MTAqci5NRUdBQllURVMsdGhpcy5fdGlsZUJvdW5kcz1uZXcgZCx0aGlzLl90aWxlcz1uZXcgbSx0aGlzLl9yZWZDb3VudHM9bmV3IE1hcCx0aGlzLl90aWxlRmVhdHVyZUNvdW50cz1uZXcgTWFwLHRoaXMuX3RtcEJvdW5kaW5nUmVjdD1sKCl9YWRkKGUsdCl7Y29uc3Qgcz1bXTtmb3IoY29uc3QgaSBvZiB0KXRoaXMuX3JlZmVyZW5jZUZlYXR1cmUoaS5vYmplY3RJZCk9PT1JLkFEREVEJiZzLnB1c2goaSk7dGhpcy5fYWRkVGlsZVN0b3JhZ2UoZSxuZXcgU2V0KHQubWFwKChlPT5lLm9iamVjdElkKSkpLHkodCkpLHRoaXMuZmVhdHVyZVN0b3JlLmFkZE1hbnkocyksdGhpcy5fdGlsZXMuYXBwbHlCeXRlU2l6ZUxpbWl0KHRoaXMubWF4aW11bUJ5dGVTaXplLChlPT50aGlzLl9yZW1vdmVUaWxlU3RvcmFnZShlKSkpfWRlc3Ryb3koKXt0aGlzLmNsZWFyKCksdGhpcy5fdGlsZUZlYXR1cmVDb3VudHMuY2xlYXIoKX1jbGVhcigpe3RoaXMuZmVhdHVyZVN0b3JlLmNsZWFyKCksdGhpcy5fdGlsZUJvdW5kcy5jbGVhcigpLHRoaXMuX3RpbGVzLmNsZWFyKCksdGhpcy5fcmVmQ291bnRzLmNsZWFyKCl9cmVmcmVzaCgpe3RoaXMuY2xlYXIoKSx0aGlzLl90aWxlRmVhdHVyZUNvdW50cy5jbGVhcigpfXByb2Nlc3NFZGl0cyhlLHQscyl7cmV0dXJuIHRoaXMuX3Byb2Nlc3NFZGl0c0RlbGV0ZShlLmRlbGV0ZWRGZWF0dXJlcy5jb25jYXQoZS51cGRhdGVkRmVhdHVyZXMpKSx0aGlzLl9wcm9jZXNzRWRpdHNSZWZldGNoKGUuYWRkZWRGZWF0dXJlcy5jb25jYXQoZS51cGRhdGVkRmVhdHVyZXMpLHQscyl9X2FkZFRpbGVTdG9yYWdlKGUsdCxzKXtjb25zdCBpPWUuaWQ7dGhpcy5fdGlsZXMuc2V0KGksbmV3IEUoZSx0LHMpKSx0aGlzLl90aWxlQm91bmRzLnNldChpLGUuZXh0ZW50KSx0aGlzLl90aWxlRmVhdHVyZUNvdW50cy5zZXQoaSx0LnNpemUpfV9yZW1vdmUoe2lkOmV9KXtjb25zdCB0PXRoaXMuX3RpbGVzLmdldChlKTt0JiZ0aGlzLl9yZW1vdmVUaWxlU3RvcmFnZSh0KX1fcmVtb3ZlVGlsZVN0b3JhZ2UoZSl7Y29uc3QgdD1bXTtmb3IoY29uc3QgaSBvZiBlLm9iamVjdElkcyl0aGlzLl91bnJlZmVyZW5jZUZlYXR1cmUoaSk9PT1JLlJFTU9WRUQmJnQucHVzaChpKTt0aGlzLmZlYXR1cmVTdG9yZS5yZW1vdmVNYW55QnlJZCh0KTtjb25zdCBzPWUuZGF0YS5pZDt0aGlzLl90aWxlcy5kZWxldGUocyksdGhpcy5fdGlsZUJvdW5kcy5kZWxldGUocyl9X3Byb2Nlc3NFZGl0c0RlbGV0ZShlKXt0aGlzLmZlYXR1cmVTdG9yZS5yZW1vdmVNYW55QnlJZChlKTtmb3IoY29uc3RbLHRdb2YgdGhpcy5fdGlsZXMpe2Zvcihjb25zdCBzIG9mIGUpdC5vYmplY3RJZHMuZGVsZXRlKHMpO3RoaXMuX3RpbGVGZWF0dXJlQ291bnRzLnNldCh0LmRhdGEuaWQsdC5vYmplY3RJZHMuc2l6ZSl9Zm9yKGNvbnN0IHQgb2YgZSl0aGlzLl9yZWZDb3VudHMuZGVsZXRlKHQpfWFzeW5jIF9wcm9jZXNzRWRpdHNSZWZldGNoKGUsdCxzKXtjb25zdCBpPShhd2FpdCB0KGUscykpLmZlYXR1cmVzLHtoYXNaOnIsaGFzTTpvfT10aGlzLmZlYXR1cmVTdG9yZTtmb3IoY29uc3QgbiBvZiBpKXtjb25zdCBlPWgodGhpcy5fdG1wQm91bmRpbmdSZWN0LG4uZ2VvbWV0cnkscixvKTtudWxsIT1lJiZ0aGlzLl90aWxlQm91bmRzLmZvckVhY2hJbkJvdW5kcyhlLChlPT57Y29uc3QgdD10aGlzLl90aWxlcy5nZXQoZSk7dGhpcy5mZWF0dXJlU3RvcmUuYWRkKG4pO2NvbnN0IHM9bi5vYmplY3RJZDt0Lm9iamVjdElkcy5oYXMocyl8fCh0Lm9iamVjdElkcy5hZGQocyksdGhpcy5fcmVmZXJlbmNlRmVhdHVyZShzKSx0aGlzLl90aWxlRmVhdHVyZUNvdW50cy5zZXQodC5kYXRhLmlkLHQub2JqZWN0SWRzLnNpemUpKX0pKX19cHJvY2VzcyhlLHQ9KCgpPT4hMCkpe2lmKG51bGw9PXRoaXMudGlsZUluZm98fCFlLmV4dGVudHx8bnVsbCE9dGhpcy5leHRlbnQmJiFhKGModGhpcy5leHRlbnQsdGhpcy5fdG1wQm91bmRpbmdSZWN0KSxlLmV4dGVudCkpcmV0dXJuIG5ldyBUKGUpO2lmKHRoaXMuX3RpbGVzLmhhcyhlLmlkKSlyZXR1cm4gbmV3IFQoZSk7Y29uc3Qgcz10aGlzLl9jcmVhdGVUaWxlVHJlZShlLHRoaXMudGlsZUluZm8pO3JldHVybiB0aGlzLl9zaW1wbGlmeShzLHQsbnVsbCwwLDEpLHRoaXMuX2NvbGxlY3RNaXNzaW5nVGlsZXMoZSxzLHRoaXMudGlsZUluZm8pfWdldCBkZWJ1Z0luZm8oKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl90aWxlcy52YWx1ZXMoKSkubWFwKCgoe2RhdGE6ZX0pPT4oe2RhdGE6ZSxmZWF0dXJlQ291bnQ6dGhpcy5fdGlsZUZlYXR1cmVDb3VudHMuZ2V0KGUuaWQpfHwwfSkpKX1nZXRGZWF0dXJlQ291bnQoZSl7cmV0dXJuIHRoaXMuX3RpbGVGZWF0dXJlQ291bnRzLmdldChlLmlkKT8/MH1hc3luYyBmZXRjaENvdW50KGUsdCxzLGkpe2NvbnN0IHI9dGhpcy5fdGlsZUZlYXR1cmVDb3VudHMuZ2V0KGUuaWQpO2lmKG51bGwhPXIpcmV0dXJuIHI7Y29uc3Qgbz1hd2FpdCBwKHQscyxpKTtyZXR1cm4gdGhpcy5fdGlsZUZlYXR1cmVDb3VudHMuc2V0KGUuaWQsby5kYXRhLmNvdW50KSxvLmRhdGEuY291bnR9X2NyZWF0ZVRpbGVUcmVlKGUsdCl7Y29uc3Qgcz1uZXcgUyhlLmxldmVsLGUucm93LGUuY29sKTtyZXR1cm4gdC51cGRhdGVUaWxlSW5mbyhzLGYuRXh0cmFwb2xhdGVPcHRpb25zLlBPV0VSX09GX1RXTyksdGhpcy5fdGlsZUJvdW5kcy5mb3JFYWNoSW5Cb3VuZHMoZS5leHRlbnQsKGk9Pntjb25zdCByPXRoaXMuX3RpbGVzLmdldChpKT8uZGF0YTtyJiZ0aGlzLl90aWxlc0FyZVJlbGF0ZWQoZSxyKSYmdGhpcy5fcG9wdWxhdGVDaGlsZHJlbihzLHIsdCx0aGlzLl90aWxlRmVhdHVyZUNvdW50cy5nZXQoci5pZCl8fDApfSkpLHN9X3RpbGVzQXJlUmVsYXRlZChlLHQpe2lmKCFlfHwhdClyZXR1cm4hMTtpZihlLmxldmVsPT09dC5sZXZlbClyZXR1cm4gZS5yb3c9PT10LnJvdyYmZS5jb2w9PT10LmNvbDtjb25zdCBzPWUubGV2ZWw8dC5sZXZlbCxpPXM/ZTp0LHI9cz90OmUsbz0xPDxyLmxldmVsLWkubGV2ZWw7cmV0dXJuIE1hdGguZmxvb3Ioci5yb3cvbyk9PT1pLnJvdyYmTWF0aC5mbG9vcihyLmNvbC9vKT09PWkuY29sfV9wb3B1bGF0ZUNoaWxkcmVuKGUsdCxzLGkpe2NvbnN0IHI9dC5sZXZlbC1lLmxldmVsLTE7aWYocjwwKXJldHVybiB2b2lkKGUuaXNMZWFmPSEwKTtjb25zdCBvPXQucm93Pj5yLG49dC5jb2w+PnIsbD1lLnJvdzw8MSxhPW4tKGUuY29sPDwxKSsoby1sPDwxKSxjPWUuY2hpbGRyZW5bYV07aWYobnVsbCE9Yyl0aGlzLl9wb3B1bGF0ZUNoaWxkcmVuKGMsdCxzLGkpO2Vsc2V7Y29uc3Qgcj1uZXcgUyhlLmxldmVsKzEsbyxuKTtzLnVwZGF0ZVRpbGVJbmZvKHIsZi5FeHRyYXBvbGF0ZU9wdGlvbnMuUE9XRVJfT0ZfVFdPKSxlLmNoaWxkcmVuW2FdPXIsdGhpcy5fcG9wdWxhdGVDaGlsZHJlbihyLHQscyxpKX19X3NpbXBsaWZ5KGUsdCxzLGkscil7Y29uc3Qgbz1yKnI7aWYoZS5pc0xlYWYpcmV0dXJuIHQodGhpcy5nZXRGZWF0dXJlQ291bnQoZSkscik/MDoodGhpcy5fcmVtb3ZlKGUpLG51bGwhPXMmJihzLmNoaWxkcmVuW2ldPW51bGwpLG8pO2NvbnN0IG49ci8yLGw9bipuO2xldCBhPTA7Zm9yKGxldCBjPTA7YzxlLmNoaWxkcmVuLmxlbmd0aDtjKyspe2NvbnN0IHM9ZS5jaGlsZHJlbltjXTthKz1udWxsIT1zP3RoaXMuX3NpbXBsaWZ5KHMsdCxlLGMsbik6bH1yZXR1cm4gMD09PWE/dGhpcy5fbWVyZ2VDaGlsZHJlbihlKToxLWEvbzxqJiYodGhpcy5fcHVyZ2UoZSksbnVsbCE9cyYmKHMuY2hpbGRyZW5baV09bnVsbCksYT1vKSxhfV9tZXJnZUNoaWxkcmVuKGUpe2NvbnN0IHQ9bmV3IFNldDtsZXQgcz0wO3RoaXMuX2ZvckVhY2hMZWFmKGUsKGU9Pntjb25zdCBpPXRoaXMuX3RpbGVzLmdldChlLmlkKTtpZihpKXtzKz1pLmJ5dGVTaXplO2Zvcihjb25zdCBlIG9mIGkub2JqZWN0SWRzKXQuaGFzKGUpfHwodC5hZGQoZSksdGhpcy5fcmVmZXJlbmNlRmVhdHVyZShlKSk7dGhpcy5fcmVtb3ZlKGUpfX0pKSx0aGlzLl9hZGRUaWxlU3RvcmFnZShlLHQscyksZS5pc0xlYWY9ITAsZS5jaGlsZHJlblswXT1lLmNoaWxkcmVuWzFdPWUuY2hpbGRyZW5bMl09ZS5jaGlsZHJlblszXT1udWxsLHRoaXMuX3RpbGVGZWF0dXJlQ291bnRzLnNldChlLmlkLHQuc2l6ZSl9X2ZvckVhY2hMZWFmKGUsdCl7Zm9yKGNvbnN0IHMgb2YgZS5jaGlsZHJlbiludWxsIT1zJiYocy5pc0xlYWY/dChzKTp0aGlzLl9mb3JFYWNoTGVhZihzLHQpKX1fcHVyZ2UoZSl7aWYobnVsbCE9ZSlpZihlLmlzTGVhZil0aGlzLl9yZW1vdmUoZSk7ZWxzZSBmb3IobGV0IHQ9MDt0PGUuY2hpbGRyZW4ubGVuZ3RoO3QrKyl7Y29uc3Qgcz1lLmNoaWxkcmVuW3RdO3RoaXMuX3B1cmdlKHMpLGUuY2hpbGRyZW5bdF09bnVsbH19X2NvbGxlY3RNaXNzaW5nVGlsZXMoZSx0LHMpe2NvbnN0IGk9bmV3IEYocyxlLHRoaXMuZXh0ZW50KTtyZXR1cm4gdGhpcy5fY29sbGVjdE1pc3NpbmdUaWxlc1JlY3Vyc2UodCxpLDEpLGkuaW5mb31fY29sbGVjdE1pc3NpbmdUaWxlc1JlY3Vyc2UoZSx0LHMpe2lmKGUuaXNMZWFmKXJldHVybjtpZighZS5oYXNDaGlsZHJlbilyZXR1cm4gdm9pZCB0LmFkZE1pc3NpbmcoZS5sZXZlbCxlLnJvdyxlLmNvbCxzKTtjb25zdCBpPXMvMjtmb3IobGV0IHI9MDtyPGUuY2hpbGRyZW4ubGVuZ3RoO3IrKyl7Y29uc3Qgcz1lLmNoaWxkcmVuW3JdO251bGw9PXM/dC5hZGRNaXNzaW5nKGUubGV2ZWwrMSwoZS5yb3c8PDEpKygoMiZyKT4+MSksKGUuY29sPDwxKSsoMSZyKSxpKTp0aGlzLl9jb2xsZWN0TWlzc2luZ1RpbGVzUmVjdXJzZShzLHQsaSl9fV9yZWZlcmVuY2VGZWF0dXJlKGUpe2NvbnN0IHQ9KHRoaXMuX3JlZkNvdW50cy5nZXQoZSl8fDApKzE7cmV0dXJuIHRoaXMuX3JlZkNvdW50cy5zZXQoZSx0KSwxPT09dD9JLkFEREVEOkkuVU5DSEFOR0VEfV91bnJlZmVyZW5jZUZlYXR1cmUoZSl7Y29uc3QgdD0odGhpcy5fcmVmQ291bnRzLmdldChlKXx8MCktMTtyZXR1cm4gMD09PXQ/KHRoaXMuX3JlZkNvdW50cy5kZWxldGUoZSksSS5SRU1PVkVEKToodD4wJiZ0aGlzLl9yZWZDb3VudHMuc2V0KGUsdCksSS5VTkNIQU5HRUQpfWdldCB0ZXN0KCl7cmV0dXJue3RpbGVzOkFycmF5LmZyb20odGhpcy5fdGlsZXMudmFsdWVzKCkpLm1hcCgoZT0+YCR7ZS5kYXRhLmlkfTpbJHtBcnJheS5mcm9tKGUub2JqZWN0SWRzKX1dYCkpLGZlYXR1cmVSZWZlcmVuY2VzOkFycmF5LmZyb20odGhpcy5fcmVmQ291bnRzLmtleXMoKSkubWFwKChlPT5gJHtlfToke3RoaXMuX3JlZkNvdW50cy5nZXQoZSl9YCkpfX19O2Z1bmN0aW9uIHkoZSl7cmV0dXJuIGUucmVkdWNlKCgoZSx0KT0+ZSt2KHQpKSwwKX1mdW5jdGlvbiB2KGUpe3JldHVybiAzMitDKGUuZ2VvbWV0cnkpK3MoZS5hdHRyaWJ1dGVzKX1mdW5jdGlvbiBDKGUpe2lmKG51bGw9PWUpcmV0dXJuIDA7Y29uc3QgdD1pKGUubGVuZ3Rocyw0KTtyZXR1cm4gMzIraShlLmNvb3Jkcyw4KSt0fWUoW28oe2NvbnN0cnVjdE9ubHk6ITB9KV0sZy5wcm90b3R5cGUsXCJmZWF0dXJlU3RvcmVcIix2b2lkIDApLGUoW28oKV0sZy5wcm90b3R5cGUsXCJ0aWxlSW5mb1wiLHZvaWQgMCksZShbbygpXSxnLnByb3RvdHlwZSxcImV4dGVudFwiLHZvaWQgMCksZShbbygpXSxnLnByb3RvdHlwZSxcIm1heGltdW1CeXRlU2l6ZVwiLHZvaWQgMCksZz1lKFtuKFwiZXNyaS52aWV3cy5pbnRlcmFjdGl2ZS5zbmFwcGluZy5mZWF0dXJlU291cmNlcy5mZWF0dXJlU2VydmljZVNvdXJjZS5GZWF0dXJlU2VydmljZVRpbGVTdG9yZVwiKV0sZyk7Y2xhc3MgRXtjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy5kYXRhPWUsdGhpcy5vYmplY3RJZHM9dCx0aGlzLmJ5dGVTaXplPXN9fWNsYXNzIFN7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMubGV2ZWw9ZSx0aGlzLnJvdz10LHRoaXMuY29sPXMsdGhpcy5pc0xlYWY9ITEsdGhpcy5leHRlbnQ9bnVsbCx0aGlzLmNoaWxkcmVuPVtudWxsLG51bGwsbnVsbCxudWxsXX1nZXQgaGFzQ2hpbGRyZW4oKXtyZXR1cm4hdGhpcy5pc0xlYWYmJihudWxsIT10aGlzLmNoaWxkcmVuWzBdfHxudWxsIT10aGlzLmNoaWxkcmVuWzFdfHxudWxsIT10aGlzLmNoaWxkcmVuWzJdfHxudWxsIT10aGlzLmNoaWxkcmVuWzNdKX19Y2xhc3MgVHtjb25zdHJ1Y3RvcihlLHQ9W10pe3RoaXMubWlzc2luZ1RpbGVzPXQsdGhpcy5mdWxsQXJlYT0wLHRoaXMuY292ZXJlZEFyZWE9MCx0aGlzLmZ1bGxBcmVhPXUoZS5leHRlbnQpLHRoaXMuY292ZXJlZEFyZWE9dGhpcy5mdWxsQXJlYX1wcmVwZW5kKGUpe3RoaXMubWlzc2luZ1RpbGVzPWUubWlzc2luZ1RpbGVzLmNvbmNhdCh0aGlzLm1pc3NpbmdUaWxlcyksdGhpcy5jb3ZlcmVkQXJlYSs9ZS5jb3ZlcmVkQXJlYSx0aGlzLmZ1bGxBcmVhKz1lLmZ1bGxBcmVhfX1jbGFzcyBGe2NvbnN0cnVjdG9yKGUsdCxzKXt0aGlzLl90aWxlSW5mbz1lLHRoaXMuX2V4dGVudD1udWxsLHRoaXMuaW5mbz1uZXcgVCh0KSxudWxsIT1zJiYodGhpcy5fZXh0ZW50PWMocykpfWFkZE1pc3NpbmcoZSx0LHMsaSl7Y29uc3Qgcj1uZXcgXyhudWxsLGUsdCxzKTt0aGlzLl90aWxlSW5mby51cGRhdGVUaWxlSW5mbyhyLGYuRXh0cmFwb2xhdGVPcHRpb25zLlBPV0VSX09GX1RXTyksbnVsbD09ci5leHRlbnR8fG51bGwhPXRoaXMuX2V4dGVudCYmIWEodGhpcy5fZXh0ZW50LHIuZXh0ZW50KXx8KHRoaXMuaW5mby5taXNzaW5nVGlsZXMucHVzaCh7ZGF0YTpyLHJlc29sdXRpb246aX0pLHRoaXMuaW5mby5jb3ZlcmVkQXJlYS09dShyLmV4dGVudCkpfX1jb25zdCBqPS4xODc1MTt2YXIgSTshZnVuY3Rpb24oZSl7ZVtlLkFEREVEPTBdPVwiQURERURcIixlW2UuUkVNT1ZFRD0xXT1cIlJFTU9WRURcIixlW2UuVU5DSEFOR0VEPTJdPVwiVU5DSEFOR0VEXCJ9KEl8fChJPXt9KSk7ZXhwb3J0e2cgYXMgRmVhdHVyZVNlcnZpY2VUaWxlU3RvcmUsVCBhcyBQcm9jZXNzUmVzdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnR7ZXF1YWxzIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e0FzeW5jU2VxdWVuY2UgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL0FzeW5jU2VxdWVuY2UuanNcIjtpbXBvcnR7Y3JlYXRlVGFzayBhcyBzfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYXN5bmNVdGlscy5qc1wiO2ltcG9ydHtIYW5kbGVPd25lciBhcyByfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvSGFuZGxlT3duZXIuanNcIjtpbXBvcnR7bWFrZUhhbmRsZSBhcyBufWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvaGFuZGxlVXRpbHMuanNcIjtpbXBvcnQgbyBmcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRFcnJvciBhcyBhfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e3N5bmMgYXMgbH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgdX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBjfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnQgZCBmcm9tXCIuLi8uLi8uLi8uLi8uLi9nZW9tZXRyeS9FeHRlbnQuanNcIjtpbXBvcnR7dG9FeHRlbnQgYXMgaH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e3VucXVhbnRpemVPcHRpbWl6ZWRGZWF0dXJlU2V0IGFzIHAsY29udmVydEZyb21GZWF0dXJlU2V0IGFzIGZ9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2ZlYXR1cmVDb252ZXJzaW9uVXRpbHMuanNcIjtpbXBvcnR7aXNIb3N0ZWRBZ29sU2VydmljZSBhcyB5fWZyb21cIi4uLy4uLy4uLy4uLy4uL2xheWVycy9zdXBwb3J0L2FyY2dpc0xheWVyVXJsLmpzXCI7aW1wb3J0e09wdGltaXplZEZlYXR1cmVTZXRQYXJzZXJDb250ZXh0IGFzIGd9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vcmVzdC9xdWVyeS9vcGVyYXRpb25zL3BiZk9wdGltaXplZEZlYXR1cmVTZXQuanNcIjtpbXBvcnR7ZXhlY3V0ZVF1ZXJ5Rm9yRXh0ZW50IGFzIG0sZXhlY3V0ZVF1ZXJ5UEJGIGFzIF8sZXhlY3V0ZVF1ZXJ5IGFzIGJ9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vcmVzdC9xdWVyeS9vcGVyYXRpb25zL3F1ZXJ5LmpzXCI7aW1wb3J0IEYgZnJvbVwiLi4vLi4vLi4vLi4vLi4vcmVzdC9zdXBwb3J0L1F1ZXJ5LmpzXCI7aW1wb3J0e1N0YXRlVHlwZSBhcyBULFBlbmRpbmdGZWF0dXJlVGlsZSBhcyBQfWZyb21cIi4vUGVuZGluZ0ZlYXR1cmVUaWxlLmpzXCI7bGV0IEk9Y2xhc3MgZXh0ZW5kcyBye2dldCBfbWluaW11bVZlcnRpY2VzUGVyRmVhdHVyZSgpe3N3aXRjaCh0aGlzLnN0b3JlPy5mZWF0dXJlU3RvcmUuZ2VvbWV0cnlUeXBlKXtjYXNlXCJlc3JpR2VvbWV0cnlQb2ludFwiOmNhc2VcImVzcmlHZW9tZXRyeU11bHRpcG9pbnRcIjpyZXR1cm4gMTtjYXNlXCJlc3JpR2VvbWV0cnlQb2x5Z29uXCI6cmV0dXJuIDQ7Y2FzZVwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIjpyZXR1cm4gMn19c2V0IGZpbHRlcihlKXtjb25zdCB0PXRoaXMuX2dldChcImZpbHRlclwiKSxpPXRoaXMuX2ZpbHRlclByb3BlcnRpZXMoZSk7SlNPTi5zdHJpbmdpZnkodCkhPT1KU09OLnN0cmluZ2lmeShpKSYmdGhpcy5fc2V0KFwiZmlsdGVyXCIsaSl9c2V0IGN1c3RvbVBhcmFtZXRlcnMoZSl7Y29uc3QgdD10aGlzLl9nZXQoXCJjdXN0b21QYXJhbWV0ZXJzXCIpO0pTT04uc3RyaW5naWZ5KHQpIT09SlNPTi5zdHJpbmdpZnkoZSkmJnRoaXMuX3NldChcImN1c3RvbVBhcmFtZXRlcnNcIixlKX1nZXQgX2NvbmZpZ3VyYXRpb24oKXtyZXR1cm57ZmlsdGVyOnRoaXMuZmlsdGVyLGN1c3RvbVBhcmFtZXRlcnM6dGhpcy5jdXN0b21QYXJhbWV0ZXJzLHRpbGVJbmZvOnRoaXMudGlsZUluZm8sdGlsZVNpemU6dGhpcy50aWxlU2l6ZX19c2V0IHRpbGVJbmZvKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0KFwidGlsZUluZm9cIik7dCE9PWUmJihudWxsIT1lJiZudWxsIT10JiZKU09OLnN0cmluZ2lmeShlKT09PUpTT04uc3RyaW5naWZ5KHQpfHwodGhpcy5fc2V0KFwidGlsZUluZm9cIixlKSx0aGlzLnN0b3JlLnRpbGVJbmZvPWUpKX1zZXQgdGlsZVNpemUoZSl7dGhpcy5fZ2V0KFwidGlsZVNpemVcIikhPT1lJiZ0aGlzLl9zZXQoXCJ0aWxlU2l6ZVwiLGUpfWdldCB1cGRhdGluZygpe3JldHVybiB0aGlzLnVwZGF0aW5nRXhjbHVkaW5nRWRpdHN8fHRoaXMuX3BlbmRpbmdFZGl0cy51cGRhdGluZ31nZXQgdXBkYXRpbmdFeGNsdWRpbmdFZGl0cygpe3JldHVybiB0aGlzLnVwZGF0aW5nSGFuZGxlcy51cGRhdGluZ31nZXQgaGFzWigpe3JldHVybiB0aGlzLnN0b3JlLmZlYXR1cmVTdG9yZS5oYXNafWNvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMudGlsZXNPZkludGVyZXN0PVtdLHRoaXMuYXZhaWxhYmlsaXR5PTAsdGhpcy5fcGVuZGluZ1RpbGVzPW5ldyBNYXAsdGhpcy5fcGVuZGluZ0VkaXRzPW5ldyBpLHRoaXMuX3BlbmRpbmdFZGl0c0Fib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyfWluaXRpYWxpemUoKXt0aGlzLl9pbml0aWFsaXplRmV0Y2hFeHRlbnQoKSx0aGlzLnVwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLl9jb25maWd1cmF0aW9uKSwoKCk9PnRoaXMucmVmcmVzaCgpKSksdGhpcy51cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy50aWxlc09mSW50ZXJlc3QpLCgoZSxpKT0+e3QoZSxpLCgoe2lkOmV9LHtpZDp0fSk9PmU9PT10KSl8fHRoaXMuX3Byb2Nlc3MoKX0pLGwpfWRlc3Ryb3koKXt0aGlzLl9wZW5kaW5nVGlsZXMuZm9yRWFjaCgoZT0+dGhpcy5fZGVsZXRlUGVuZGluZ1RpbGUoZSkpKSx0aGlzLl9wZW5kaW5nVGlsZXMuY2xlYXIoKSx0aGlzLnN0b3JlLmRlc3Ryb3koKSx0aGlzLnRpbGVzT2ZJbnRlcmVzdC5sZW5ndGg9MCx0aGlzLl9wZW5kaW5nRWRpdHNBYm9ydENvbnRyb2xsZXIuYWJvcnQoKSx0aGlzLl9wZW5kaW5nRWRpdHNBYm9ydENvbnRyb2xsZXI9bnVsbH1yZWZyZXNoKCl7dGhpcy5zdG9yZS5yZWZyZXNoKCksdGhpcy5fcGVuZGluZ1RpbGVzLmZvckVhY2goKGU9PnRoaXMuX2RlbGV0ZVBlbmRpbmdUaWxlKGUpKSksdGhpcy5fcHJvY2VzcygpfWFwcGx5RWRpdHMoZSl7dGhpcy5fcGVuZGluZ0VkaXRzLnB1c2goZSwoYXN5bmMgZT0+e2lmKDA9PT1lLmFkZGVkRmVhdHVyZXMubGVuZ3RoJiYwPT09ZS51cGRhdGVkRmVhdHVyZXMubGVuZ3RoJiYwPT09ZS5kZWxldGVkRmVhdHVyZXMubGVuZ3RoKXJldHVybjtmb3IoY29uc3RbLGldb2YgdGhpcy5fcGVuZGluZ1RpbGVzKWkucmVzZXQoKTtjb25zdCB0PXsuLi5lLGRlbGV0ZWRGZWF0dXJlczplLmRlbGV0ZWRGZWF0dXJlcy5tYXAoKCh7b2JqZWN0SWQ6ZSxnbG9iYWxJZDp0fSk9PmUmJi0xIT09ZT9lOnRoaXMuX2xvb2t1cE9iamVjdElkQnlHbG9iYWxJZCh0KSkpfTthd2FpdCB0aGlzLnVwZGF0aW5nSGFuZGxlcy5hZGRQcm9taXNlKHRoaXMuc3RvcmUucHJvY2Vzc0VkaXRzKHQsKChlLHQpPT50aGlzLl9xdWVyeUZlYXR1cmVzQnlJZChlLHQpKSx0aGlzLl9wZW5kaW5nRWRpdHNBYm9ydENvbnRyb2xsZXIuc2lnbmFsKSksdGhpcy5fcHJvY2Vzc1BlbmRpbmdUaWxlcygpfSkpfV9pbml0aWFsaXplRmV0Y2hFeHRlbnQoKXtpZighdGhpcy5jYXBhYmlsaXRpZXMucXVlcnkuc3VwcG9ydHNFeHRlbnR8fCF5KHRoaXMudXJsKSlyZXR1cm47Y29uc3QgZT1zKChhc3luYyBlPT57dHJ5e2NvbnN0IHQ9YXdhaXQgbSh0aGlzLnVybCxuZXcgRih7d2hlcmU6XCIxPTFcIixvdXRTcGF0aWFsUmVmZXJlbmNlOnRoaXMuc3BhdGlhbFJlZmVyZW5jZSxjYWNoZUhpbnQ6dGhpcy5jYXBhYmlsaXRpZXMucXVlcnkuc3VwcG9ydHNDYWNoZUhpbnQ/P3ZvaWQgMH0pLHtxdWVyeTp0aGlzLl9jb25maWd1cmF0aW9uLmN1c3RvbVBhcmFtZXRlcnMsc2lnbmFsOmV9KTt0aGlzLnN0b3JlLmV4dGVudD1kLmZyb21KU09OKHQuZGF0YT8uZXh0ZW50KX1jYXRjaCh0KXthKHQpLG8uZ2V0TG9nZ2VyKHRoaXMpLndhcm4oXCJGYWlsZWQgdG8gZmV0Y2ggZGF0YSBleHRlbnRcIix0KX19KSk7dGhpcy51cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZShlLnByb21pc2UudGhlbigoKCk9PnRoaXMuX3Byb2Nlc3MoKSkpKSx0aGlzLmhhbmRsZXMuYWRkKG4oKCgpPT5lLmFib3J0KCkpKSl9Z2V0IGRlYnVnSW5mbygpe3JldHVybntudW1iZXJPZkZlYXR1cmVzOnRoaXMuc3RvcmUuZmVhdHVyZVN0b3JlLm51bUZlYXR1cmVzLHRpbGVzT2ZJbnRlcmVzdDp0aGlzLnRpbGVzT2ZJbnRlcmVzdCxwZW5kaW5nVGlsZXM6QXJyYXkuZnJvbSh0aGlzLl9wZW5kaW5nVGlsZXMudmFsdWVzKCkpLm1hcCgoZT0+ZS5kZWJ1Z0luZm8pKSxzdG9yZWRUaWxlczp0aGlzLnN0b3JlLmRlYnVnSW5mb319X3Byb2Nlc3MoKXt0aGlzLl9tYXJrVGlsZXNOb3RBbGl2ZSgpLHRoaXMuX2NyZWF0ZVBlbmRpbmdUaWxlcygpLHRoaXMuX2RlbGV0ZVBlbmRpbmdUaWxlcygpLHRoaXMuX3Byb2Nlc3NQZW5kaW5nVGlsZXMoKX1fbWFya1RpbGVzTm90QWxpdmUoKXtmb3IoY29uc3RbLGVdb2YgdGhpcy5fcGVuZGluZ1RpbGVzKWUuYWxpdmU9ITF9X2NyZWF0ZVBlbmRpbmdUaWxlcygpe2NvbnN0IGU9dGhpcy5fY29sbGVjdE1pc3NpbmdUaWxlc0luZm8oKTtpZih0aGlzLl9zZXRBdmFpbGFiaWxpdHkobnVsbD09ZT8xOmUuY292ZXJlZEFyZWEvZS5mdWxsQXJlYSksbnVsbCE9ZSlmb3IoY29uc3R7ZGF0YTp0LHJlc29sdXRpb246aX1vZiBlLm1pc3NpbmdUaWxlcyl7Y29uc3QgZT10aGlzLl9wZW5kaW5nVGlsZXMuZ2V0KHQuaWQpO2U/KGUucmVzb2x1dGlvbj1pLGUuYWxpdmU9ITApOnRoaXMuX2NyZWF0ZVBlbmRpbmdUaWxlKHQsaSl9fV9jb2xsZWN0TWlzc2luZ1RpbGVzSW5mbygpe2xldCBlPW51bGw7Zm9yKGxldCB0PXRoaXMudGlsZXNPZkludGVyZXN0Lmxlbmd0aC0xO3Q+PTA7dC0tKXtjb25zdCBpPXRoaXMudGlsZXNPZkludGVyZXN0W3RdLHM9dGhpcy5zdG9yZS5wcm9jZXNzKGksKChlLHQpPT50aGlzLl92ZXJpZnlUaWxlQ29tcGxleGl0eShlLHQpKSk7bnVsbD09ZT9lPXM6ZS5wcmVwZW5kKHMpfXJldHVybiBlfV9kZWxldGVQZW5kaW5nVGlsZXMoKXtmb3IoY29uc3RbLGVdb2YgdGhpcy5fcGVuZGluZ1RpbGVzKWUuYWxpdmV8fHRoaXMuX2RlbGV0ZVBlbmRpbmdUaWxlKGUpfV9wcm9jZXNzUGVuZGluZ1RpbGVzKCl7Y29uc3QgZT17ZmV0Y2hDb3VudDooZSx0KT0+dGhpcy5fZmV0Y2hDb3VudChlLHQpLGZldGNoRmVhdHVyZXM6KGUsdCxpKT0+dGhpcy5fZmV0Y2hGZWF0dXJlcyhlLHQsaSksZmluaXNoOihlLHQpPT50aGlzLl9maW5pc2hQZW5kaW5nVGlsZShlLHQpLHJlc3VtZTooKT0+dGhpcy5fcHJvY2Vzc1BlbmRpbmdUaWxlcygpfTtpZih0aGlzLl9lbnN1cmVGZXRjaEFsbENvdW50cyhlKSlmb3IoY29uc3RbLHRdb2YgdGhpcy5fcGVuZGluZ1RpbGVzKXRoaXMuX3ZlcmlmeVRpbGVDb21wbGV4aXR5KHRoaXMuc3RvcmUuZ2V0RmVhdHVyZUNvdW50KHQuZGF0YSksdC5yZXNvbHV0aW9uKSYmdGhpcy51cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0LnByb2Nlc3MoZSkpfV92ZXJpZnlUaWxlQ29tcGxleGl0eShlLHQpe3JldHVybiB0aGlzLl92ZXJpZnlWZXJ0ZXhDb21wbGV4aXR5KGUpJiZ0aGlzLl92ZXJpZnlGZWF0dXJlRGVuc2l0eShlLHQpfV92ZXJpZnlWZXJ0ZXhDb21wbGV4aXR5KGUpe3JldHVybiBlKnRoaXMuX21pbmltdW1WZXJ0aWNlc1BlckZlYXR1cmU8Q31fdmVyaWZ5RmVhdHVyZURlbnNpdHkoZSx0KXtpZihudWxsPT10aGlzLnRpbGVJbmZvKXJldHVybiExO2NvbnN0IGk9dGhpcy50aWxlU2l6ZSp0O3JldHVybiBlKihFLyhpKmkpKTxTfV9lbnN1cmVGZXRjaEFsbENvdW50cyhlKXtsZXQgdD0hMDtmb3IoY29uc3RbLGldb2YgdGhpcy5fcGVuZGluZ1RpbGVzKWkuc3RhdGUudHlwZTxULkZFVENIRURfQ09VTlQmJnRoaXMudXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UoaS5wcm9jZXNzKGUpKSxpLnN0YXRlLnR5cGU8PVQuRkVUQ0hfQ09VTlQmJih0PSExKTtyZXR1cm4gdH1fZmluaXNoUGVuZGluZ1RpbGUoZSx0KXt0aGlzLnN0b3JlLmFkZChlLmRhdGEsdCksdGhpcy5fZGVsZXRlUGVuZGluZ1RpbGUoZSksdGhpcy5fdXBkYXRlQXZhaWxhYmlsaXR5KCl9X3VwZGF0ZUF2YWlsYWJpbGl0eSgpe2NvbnN0IGU9dGhpcy5fY29sbGVjdE1pc3NpbmdUaWxlc0luZm8oKTt0aGlzLl9zZXRBdmFpbGFiaWxpdHkobnVsbD09ZT8xOmUuY292ZXJlZEFyZWEvZS5mdWxsQXJlYSl9X3NldEF2YWlsYWJpbGl0eShlKXt0aGlzLl9zZXQoXCJhdmFpbGFiaWxpdHlcIixlKX1fY3JlYXRlUGVuZGluZ1RpbGUoZSx0KXtjb25zdCBpPW5ldyBQKGUsdCk7cmV0dXJuIHRoaXMuX3BlbmRpbmdUaWxlcy5zZXQoZS5pZCxpKSxpfV9kZWxldGVQZW5kaW5nVGlsZShlKXtlLnJlc2V0KCksdGhpcy5fcGVuZGluZ1RpbGVzLmRlbGV0ZShlLmRhdGEuaWQpfWFzeW5jIF9mZXRjaENvdW50KGUsdCl7cmV0dXJuIHRoaXMuc3RvcmUuZmV0Y2hDb3VudChlLmRhdGEsdGhpcy51cmwsdGhpcy5fY3JlYXRlQ291bnRRdWVyeShlKSx7cXVlcnk6dGhpcy5jdXN0b21QYXJhbWV0ZXJzLHRpbWVvdXQ6TyxzaWduYWw6dH0pfWFzeW5jIF9mZXRjaEZlYXR1cmVzKGUsdCxpKXtsZXQgcz0wO2NvbnN0IHI9W107bGV0IG49MCxvPXQ7Zm9yKDs7KXtjb25zdCBhPXRoaXMuX2NyZWF0ZUZlYXR1cmVzUXVlcnkoZSksbD10aGlzLl9zZXRQYWdpbmdQYXJhbWV0ZXJzKGEscyxvKSx7ZmVhdHVyZXM6dSxleGNlZWRlZFRyYW5zZmVyTGltaXQ6Y309YXdhaXQgdGhpcy5fcXVlcnlGZWF0dXJlcyhhLGkpO2wmJihzKz1hLm51bSksbis9dS5sZW5ndGg7Zm9yKGNvbnN0IGUgb2YgdSlyLnB1c2goZSk7aWYobz10LW4sIWx8fCFjfHxvPD0wKXJldHVybiByfX1fZmlsdGVyUHJvcGVydGllcyhlKXtyZXR1cm4gbnVsbD09ZT97d2hlcmU6XCIxPTFcIixnZGJWZXJzaW9uOnZvaWQgMCx0aW1lRXh0ZW50OnZvaWQgMH06e3doZXJlOmUud2hlcmV8fFwiMT0xXCIsdGltZUV4dGVudDplLnRpbWVFeHRlbnQsZ2RiVmVyc2lvbjplLmdkYlZlcnNpb259fV9sb29rdXBPYmplY3RJZEJ5R2xvYmFsSWQoZSl7Y29uc3QgdD10aGlzLmdsb2JhbElkRmllbGQsaT10aGlzLm9iamVjdElkRmllbGQ7aWYobnVsbD09dCl0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBnbG9iYWxJZEZpZWxkIHRvIGJlIGRlZmluZWRcIik7bGV0IHM9bnVsbDtpZih0aGlzLnN0b3JlLmZlYXR1cmVTdG9yZS5mb3JFYWNoKChyPT57ZT09PXIuYXR0cmlidXRlc1t0XSYmKHM9ci5vYmplY3RJZD8/ci5hdHRyaWJ1dGVzW2ldKX0pKSxudWxsPT1zKXRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgdG8gZmluZCBhIGZlYXR1cmUgd2l0aCBnbG9iYWxJZCAke2V9YCk7cmV0dXJuIHN9X3F1ZXJ5RmVhdHVyZXNCeUlkKGUsdCl7Y29uc3QgaT10aGlzLl9jcmVhdGVGZWF0dXJlc1F1ZXJ5KCk7cmV0dXJuIGkub2JqZWN0SWRzPWUsdGhpcy5fcXVlcnlGZWF0dXJlcyhpLHQpfV9xdWVyeUZlYXR1cmVzKGUsdCl7cmV0dXJuIHRoaXMuY2FwYWJpbGl0aWVzLnF1ZXJ5LnN1cHBvcnRzRm9ybWF0UEJGP3RoaXMuX3F1ZXJ5RmVhdHVyZXNQQkYoZSx0KTp0aGlzLl9xdWVyeUZlYXR1cmVzSlNPTihlLHQpfWFzeW5jIF9xdWVyeUZlYXR1cmVzUEJGKGUsdCl7Y29uc3R7c291cmNlU3BhdGlhbFJlZmVyZW5jZTppfT10aGlzLHtkYXRhOnN9PWF3YWl0IF8odGhpcy51cmwsZSxuZXcgZyh7c291cmNlU3BhdGlhbFJlZmVyZW5jZTppfSkse3F1ZXJ5OnRoaXMuX2NvbmZpZ3VyYXRpb24uY3VzdG9tUGFyYW1ldGVycyx0aW1lb3V0Ok8sc2lnbmFsOnR9KTtyZXR1cm4gcChzKX1hc3luYyBfcXVlcnlGZWF0dXJlc0pTT04oZSx0KXtjb25zdHtzb3VyY2VTcGF0aWFsUmVmZXJlbmNlOml9PXRoaXMse2RhdGE6c309YXdhaXQgYih0aGlzLnVybCxlLGkse3F1ZXJ5OnRoaXMuX2NvbmZpZ3VyYXRpb24uY3VzdG9tUGFyYW1ldGVycyx0aW1lb3V0Ok8sc2lnbmFsOnR9KTtyZXR1cm4gZihzLHRoaXMub2JqZWN0SWRGaWVsZCl9X2NyZWF0ZUNvdW50UXVlcnkoZSl7Y29uc3QgdD10aGlzLl9jcmVhdGVCYXNlUXVlcnkoZSk7cmV0dXJuIHRoaXMuY2FwYWJpbGl0aWVzLnF1ZXJ5LnN1cHBvcnRzQ2FjaGVIaW50JiYodC5jYWNoZUhpbnQ9ITApLHR9X2NyZWF0ZUZlYXR1cmVzUXVlcnkoZT1udWxsKXtjb25zdCB0PXRoaXMuX2NyZWF0ZUJhc2VRdWVyeShlKTtyZXR1cm4gdC5vdXRGaWVsZHM9dGhpcy5nbG9iYWxJZEZpZWxkP1t0aGlzLmdsb2JhbElkRmllbGQsdGhpcy5vYmplY3RJZEZpZWxkXTpbdGhpcy5vYmplY3RJZEZpZWxkXSx0LnJldHVybkdlb21ldHJ5PSEwLG51bGwhPWUmJih0aGlzLmNhcGFiaWxpdGllcy5xdWVyeS5zdXBwb3J0c1Jlc3VsdFR5cGU/dC5yZXN1bHRUeXBlPVwidGlsZVwiOnRoaXMuY2FwYWJpbGl0aWVzLnF1ZXJ5LnN1cHBvcnRzQ2FjaGVIaW50JiYodC5jYWNoZUhpbnQ9ITApKSx0fV9jcmVhdGVCYXNlUXVlcnkoZSl7Y29uc3QgdD1uZXcgRih7cmV0dXJuWjp0aGlzLmhhc1oscmV0dXJuTTohMSxnZW9tZXRyeTpudWxsIT10aGlzLnRpbGVJbmZvJiZudWxsIT1lP2goZS5kYXRhLmV4dGVudCx0aGlzLnRpbGVJbmZvLnNwYXRpYWxSZWZlcmVuY2UpOnZvaWQgMH0pLGk9dGhpcy5fY29uZmlndXJhdGlvbi5maWx0ZXI7cmV0dXJuIG51bGwhPWkmJih0LndoZXJlPWkud2hlcmUsdC5nZGJWZXJzaW9uPWkuZ2RiVmVyc2lvbix0LnRpbWVFeHRlbnQ9aS50aW1lRXh0ZW50KSx0Lm91dFNwYXRpYWxSZWZlcmVuY2U9dGhpcy5zcGF0aWFsUmVmZXJlbmNlLHR9X3NldFBhZ2luZ1BhcmFtZXRlcnMoZSx0LGkpe2lmKCF0aGlzLmNhcGFiaWxpdGllcy5xdWVyeS5zdXBwb3J0c1BhZ2luYXRpb24pcmV0dXJuITE7Y29uc3R7c3VwcG9ydHNNYXhSZWNvcmRDb3VudEZhY3RvcjpzLHN1cHBvcnRzQ2FjaGVIaW50OnIsdGlsZU1heFJlY29yZENvdW50Om4sbWF4UmVjb3JkQ291bnQ6byxzdXBwb3J0c1Jlc3VsdFR5cGU6YX09dGhpcy5jYXBhYmlsaXRpZXMucXVlcnksbD1zP0YuTUFYX01BWF9SRUNPUkRfQ09VTlRfRkFDVE9SOjEsdT1sKigoYXx8cikmJm4/bjpvfHx2KTtyZXR1cm4gZS5zdGFydD10LHM/KGUubWF4UmVjb3JkQ291bnRGYWN0b3I9TWF0aC5taW4obCxNYXRoLmNlaWwoaS91KSksZS5udW09TWF0aC5taW4oaSxlLm1heFJlY29yZENvdW50RmFjdG9yKnUpKTplLm51bT1NYXRoLm1pbihpLHUpLCEwfX07ZShbdSh7Y29uc3RydWN0T25seTohMH0pXSxJLnByb3RvdHlwZSxcInVybFwiLHZvaWQgMCksZShbdSh7Y29uc3RydWN0T25seTohMH0pXSxJLnByb3RvdHlwZSxcIm9iamVjdElkRmllbGRcIix2b2lkIDApLGUoW3Uoe2NvbnN0cnVjdE9ubHk6ITB9KV0sSS5wcm90b3R5cGUsXCJnbG9iYWxJZEZpZWxkXCIsdm9pZCAwKSxlKFt1KHtjb25zdHJ1Y3RPbmx5OiEwfSldLEkucHJvdG90eXBlLFwiY2FwYWJpbGl0aWVzXCIsdm9pZCAwKSxlKFt1KHtjb25zdHJ1Y3RPbmx5OiEwfSldLEkucHJvdG90eXBlLFwic291cmNlU3BhdGlhbFJlZmVyZW5jZVwiLHZvaWQgMCksZShbdSh7Y29uc3RydWN0T25seTohMH0pXSxJLnByb3RvdHlwZSxcInNwYXRpYWxSZWZlcmVuY2VcIix2b2lkIDApLGUoW3Uoe2NvbnN0cnVjdE9ubHk6ITB9KV0sSS5wcm90b3R5cGUsXCJzdG9yZVwiLHZvaWQgMCksZShbdSh7cmVhZE9ubHk6ITB9KV0sSS5wcm90b3R5cGUsXCJfbWluaW11bVZlcnRpY2VzUGVyRmVhdHVyZVwiLG51bGwpLGUoW3UoKV0sSS5wcm90b3R5cGUsXCJmaWx0ZXJcIixudWxsKSxlKFt1KCldLEkucHJvdG90eXBlLFwiY3VzdG9tUGFyYW1ldGVyc1wiLG51bGwpLGUoW3Uoe3JlYWRPbmx5OiEwfSldLEkucHJvdG90eXBlLFwiX2NvbmZpZ3VyYXRpb25cIixudWxsKSxlKFt1KCldLEkucHJvdG90eXBlLFwidGlsZUluZm9cIixudWxsKSxlKFt1KCldLEkucHJvdG90eXBlLFwidGlsZVNpemVcIixudWxsKSxlKFt1KCldLEkucHJvdG90eXBlLFwidGlsZXNPZkludGVyZXN0XCIsdm9pZCAwKSxlKFt1KHtyZWFkT25seTohMH0pXSxJLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsbnVsbCksZShbdSh7cmVhZE9ubHk6ITB9KV0sSS5wcm90b3R5cGUsXCJ1cGRhdGluZ0V4Y2x1ZGluZ0VkaXRzXCIsbnVsbCksZShbdSh7cmVhZE9ubHk6ITB9KV0sSS5wcm90b3R5cGUsXCJhdmFpbGFiaWxpdHlcIix2b2lkIDApLGUoW3UoKV0sSS5wcm90b3R5cGUsXCJoYXNaXCIsbnVsbCksST1lKFtjKFwiZXNyaS52aWV3cy5pbnRlcmFjdGl2ZS5zbmFwcGluZy5mZWF0dXJlU291cmNlcy5mZWF0dXJlU2VydmljZVNvdXJjZS5GZWF0dXJlU2VydmljZVRpbGVkRmV0Y2hlclwiKV0sSSk7Y29uc3Qgdj0yZTMsTz02ZTUsQz0xZTYsRT0yNSxTPTE7ZXhwb3J0e0kgYXMgRmVhdHVyZVNlcnZpY2VUaWxlZEZldGNoZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtjcmVhdGVUYXNrIGFzIHQscmVzdWx0T3JBYm9ydCBhcyBlfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYXN5bmNVdGlscy5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgcyxmcm9tRXh0ZW50IGFzIGEsaW50ZXJzZWN0cyBhcyBFfWZyb21cIi4uLy4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ1JlY3QuanNcIjtjbGFzcyBye2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5kYXRhPXQsdGhpcy5yZXNvbHV0aW9uPWUsdGhpcy5zdGF0ZT17dHlwZTp1LkNSRUFURUR9LHRoaXMuYWxpdmU9ITB9cHJvY2Vzcyh0KXtzd2l0Y2godGhpcy5zdGF0ZS50eXBlKXtjYXNlIHUuQ1JFQVRFRDpyZXR1cm4gdGhpcy5zdGF0ZT10aGlzLl9nb3RvRmV0Y2hDb3VudCh0aGlzLnN0YXRlLHQpLHRoaXMuc3RhdGUudGFzay5wcm9taXNlLnRoZW4odC5yZXN1bWUsdC5yZXN1bWUpO2Nhc2UgdS5GRVRDSF9DT1VOVDpicmVhaztjYXNlIHUuRkVUQ0hFRF9DT1VOVDpyZXR1cm4gdGhpcy5zdGF0ZT10aGlzLl9nb3RvRmV0Y2hGZWF0dXJlcyh0aGlzLnN0YXRlLHQpLHRoaXMuc3RhdGUudGFzay5wcm9taXNlLnRoZW4odC5yZXN1bWUsdC5yZXN1bWUpO2Nhc2UgdS5GRVRDSF9GRUFUVVJFUzpicmVhaztjYXNlIHUuRkVUQ0hFRF9GRUFUVVJFUzp0aGlzLnN0YXRlPXRoaXMuX2dvVG9Eb25lKHRoaXMuc3RhdGUsdCk7Y2FzZSB1LkRPTkU6fXJldHVybiBudWxsfWdldCBkZWJ1Z0luZm8oKXtyZXR1cm57ZGF0YTp0aGlzLmRhdGEsZmVhdHVyZUNvdW50OnRoaXMuX2ZlYXR1cmVDb3VudCxzdGF0ZTp0aGlzLl9zdGF0ZVRvU3RyaW5nfX1nZXQgX2ZlYXR1cmVDb3VudCgpe3N3aXRjaCh0aGlzLnN0YXRlLnR5cGUpe2Nhc2UgdS5DUkVBVEVEOmNhc2UgdS5GRVRDSF9DT1VOVDpyZXR1cm4gMDtjYXNlIHUuRkVUQ0hFRF9DT1VOVDpyZXR1cm4gdGhpcy5zdGF0ZS5mZWF0dXJlQ291bnQ7Y2FzZSB1LkZFVENIX0ZFQVRVUkVTOnJldHVybiB0aGlzLnN0YXRlLnByZXZpb3VzLmZlYXR1cmVDb3VudDtjYXNlIHUuRkVUQ0hFRF9GRUFUVVJFUzpyZXR1cm4gdGhpcy5zdGF0ZS5mZWF0dXJlcy5sZW5ndGg7Y2FzZSB1LkRPTkU6cmV0dXJuIHRoaXMuc3RhdGUucHJldmlvdXMuZmVhdHVyZXMubGVuZ3RofX1nZXQgX3N0YXRlVG9TdHJpbmcoKXtzd2l0Y2godGhpcy5zdGF0ZS50eXBlKXtjYXNlIHUuQ1JFQVRFRDpyZXR1cm5cImNyZWF0ZWRcIjtjYXNlIHUuRkVUQ0hfQ09VTlQ6cmV0dXJuXCJmZXRjaC1jb3VudFwiO2Nhc2UgdS5GRVRDSEVEX0NPVU5UOnJldHVyblwiZmV0Y2hlZC1jb3VudFwiO2Nhc2UgdS5GRVRDSF9GRUFUVVJFUzpyZXR1cm5cImZldGNoLWZlYXR1cmVzXCI7Y2FzZSB1LkZFVENIRURfRkVBVFVSRVM6cmV0dXJuXCJmZXRjaGVkLWZlYXR1cmVzXCI7Y2FzZSB1LkRPTkU6cmV0dXJuXCJkb25lXCJ9fV9nb3RvRmV0Y2hDb3VudChzLGEpe3JldHVybnt0eXBlOnUuRkVUQ0hfQ09VTlQscHJldmlvdXM6cyx0YXNrOnQoKGFzeW5jIHQ9Pntjb25zdCBzPWF3YWl0IGUoYS5mZXRjaENvdW50KHRoaXMsdCkpO3RoaXMuc3RhdGUudHlwZT09PXUuRkVUQ0hfQ09VTlQmJih0aGlzLnN0YXRlPXRoaXMuX2dvdG9GZXRjaGVkQ291bnQodGhpcy5zdGF0ZSxzLm9rP3MudmFsdWU6MS8wKSl9KSl9fV9nb3RvRmV0Y2hlZENvdW50KHQsZSl7cmV0dXJue3R5cGU6dS5GRVRDSEVEX0NPVU5ULGZlYXR1cmVDb3VudDplLHByZXZpb3VzOnR9fV9nb3RvRmV0Y2hGZWF0dXJlcyhzLGEpe3JldHVybnt0eXBlOnUuRkVUQ0hfRkVBVFVSRVMscHJldmlvdXM6cyx0YXNrOnQoKGFzeW5jIHQ9Pntjb25zdCBFPWF3YWl0IGUoYS5mZXRjaEZlYXR1cmVzKHRoaXMscy5mZWF0dXJlQ291bnQsdCkpO3RoaXMuc3RhdGUudHlwZT09PXUuRkVUQ0hfRkVBVFVSRVMmJih0aGlzLnN0YXRlPXRoaXMuX2dvdG9GZXRjaGVkRmVhdHVyZXModGhpcy5zdGF0ZSxFLm9rP0UudmFsdWU6W10pKX0pKX19X2dvdG9GZXRjaGVkRmVhdHVyZXModCxlKXtyZXR1cm57dHlwZTp1LkZFVENIRURfRkVBVFVSRVMscHJldmlvdXM6dCxmZWF0dXJlczplfX1fZ29Ub0RvbmUodCxlKXtyZXR1cm4gZS5maW5pc2godGhpcyx0LmZlYXR1cmVzKSx7dHlwZTp1LkRPTkUscHJldmlvdXM6dH19cmVzZXQoKXtjb25zdCB0PXRoaXMuc3RhdGU7c3dpdGNoKHRoaXMuc3RhdGU9e3R5cGU6dS5DUkVBVEVEfSx0LnR5cGUpe2Nhc2UgdS5DUkVBVEVEOmNhc2UgdS5GRVRDSEVEX0NPVU5UOmNhc2UgdS5GRVRDSEVEX0ZFQVRVUkVTOmNhc2UgdS5ET05FOmJyZWFrO2Nhc2UgdS5GRVRDSF9DT1VOVDpjYXNlIHUuRkVUQ0hfRkVBVFVSRVM6dC50YXNrLmFib3J0KCl9fWludGVyc2VjdHModCl7cmV0dXJuIG51bGw9PXR8fCF0aGlzLmRhdGEuZXh0ZW50fHwoYSh0LFQpLEUodGhpcy5kYXRhLmV4dGVudCxUKSl9fXZhciB1OyFmdW5jdGlvbih0KXt0W3QuQ1JFQVRFRD0wXT1cIkNSRUFURURcIix0W3QuRkVUQ0hfQ09VTlQ9MV09XCJGRVRDSF9DT1VOVFwiLHRbdC5GRVRDSEVEX0NPVU5UPTJdPVwiRkVUQ0hFRF9DT1VOVFwiLHRbdC5GRVRDSF9GRUFUVVJFUz0zXT1cIkZFVENIX0ZFQVRVUkVTXCIsdFt0LkZFVENIRURfRkVBVFVSRVM9NF09XCJGRVRDSEVEX0ZFQVRVUkVTXCIsdFt0LkRPTkU9NV09XCJET05FXCJ9KHV8fCh1PXt9KSk7Y29uc3QgVD1zKCk7ZXhwb3J0e3IgYXMgUGVuZGluZ0ZlYXR1cmVUaWxlLHUgYXMgU3RhdGVUeXBlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e0xSVUNhY2hlIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9MUlVDYWNoZS5qc1wiO2ltcG9ydHtnZXRPckNyZWF0ZU1hcFZhbHVlIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9NYXBVdGlscy5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRlZCBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e2dldE1ldGVyc1BlclZlcnRpY2FsVW5pdEZvclNSIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS91bml0VXRpbHMuanNcIjtpbXBvcnR7Z2V0TWV0ZXJzUGVyVW5pdCBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL3N5bWJvbHMvc3VwcG9ydC91bml0Q29udmVyc2lvblV0aWxzLmpzXCI7ZnVuY3Rpb24gaShlPSExLHQpe2lmKGUpe2NvbnN0e2VsZXZhdGlvbkluZm86ZSxhbGlnblBvaW50c0luRmVhdHVyZXM6cyxzcGF0aWFsUmVmZXJlbmNlOm59PXQ7cmV0dXJuIG5ldyBjKGUscyxuKX1yZXR1cm4gbmV3IGF9Y2xhc3MgYXthc3luYyBhbGlnbkNhbmRpZGF0ZXMoZSx0KXtyZXR1cm4gZX1ub3RpZnlFbGV2YXRpb25Tb3VyY2VDaGFuZ2UoKXt9fWNvbnN0IHI9MTAyNDtjbGFzcyBje2NvbnN0cnVjdG9yKHQscyxvKXt0aGlzLl9lbGV2YXRpb25JbmZvPXQsdGhpcy5fYWxpZ25Qb2ludHNJbkZlYXR1cmVzPXMsdGhpcy5zcGF0aWFsUmVmZXJlbmNlPW8sdGhpcy5fYWxpZ25tZW50c0NhY2hlPW5ldyBlKHIpLHRoaXMuX2NhY2hlVmVyc2lvbj0wLHRoaXMuX21ldGVyc1BlclZlcnRpY2FsVW5pdD1uKG8pfWFzeW5jIGFsaWduQ2FuZGlkYXRlcyhlLHQpe2NvbnN0IHM9dGhpcy5fZWxldmF0aW9uSW5mbztyZXR1cm4gbnVsbD09c3x8XCJhYnNvbHV0ZS1oZWlnaHRcIiE9PXMubW9kZXx8cy5mZWF0dXJlRXhwcmVzc2lvbkluZm8/dGhpcy5fYWxpZ25Db21wdXRlZEVsZXZhdGlvbkNhbmRpZGF0ZXMoZSx0KToodGhpcy5fYWxpZ25BYnNvbHV0ZUVsZXZhdGlvbkNhbmRpZGF0ZXMoZSxzKSxlKX1ub3RpZnlFbGV2YXRpb25Tb3VyY2VDaGFuZ2UoKXt0aGlzLl9hbGlnbm1lbnRzQ2FjaGUuY2xlYXIoKSx0aGlzLl9jYWNoZVZlcnNpb24rK31fYWxpZ25BYnNvbHV0ZUVsZXZhdGlvbkNhbmRpZGF0ZXMoZSx0KXtjb25zdHtvZmZzZXQ6cyx1bml0Om59PXQ7aWYobnVsbD09cylyZXR1cm47Y29uc3QgaT1zKihvKG4/P1wibWV0ZXJzXCIpL3RoaXMuX21ldGVyc1BlclZlcnRpY2FsVW5pdCk7Zm9yKGNvbnN0IG8gb2YgZSlzd2l0Y2goby50eXBlKXtjYXNlXCJlZGdlXCI6by5zdGFydC56Kz1pLG8uZW5kLnorPWk7Y29udGludWU7Y2FzZVwidmVydGV4XCI6by50YXJnZXQueis9aTtjb250aW51ZX19YXN5bmMgX2FsaWduQ29tcHV0ZWRFbGV2YXRpb25DYW5kaWRhdGVzKGUsbil7Y29uc3Qgbz1uZXcgTWFwO2Zvcihjb25zdCBzIG9mIGUpdChvLHMub2JqZWN0SWQsZCkucHVzaChzKTtjb25zdFtpLGEscl09dGhpcy5fcHJlcGFyZVF1ZXJ5KG8pLGM9YXdhaXQgdGhpcy5fYWxpZ25Qb2ludHNJbkZlYXR1cmVzKGksbik7cyhuKTtpZihyIT09dGhpcy5fY2FjaGVWZXJzaW9uKXJldHVybiB0aGlzLl9hbGlnbkNvbXB1dGVkRWxldmF0aW9uQ2FuZGlkYXRlcyhlLG4pO3RoaXMuX2FwcGx5Q2FjaGVBbmRSZXNwb25zZShpLGMsYSk7Y29uc3R7ZHJhcGVkT2JqZWN0SWRzOmwsZmFpbGVkT2JqZWN0SWRzOmh9PWMsdT1bXTtmb3IoY29uc3QgdCBvZiBlKXtjb25zdHtvYmplY3RJZDplfT10O2wuaGFzKGUpJiZcImVkZ2VcIj09PXQudHlwZSYmKHQuZHJhcGVkPSEwKSxoLmhhcyhlKXx8dS5wdXNoKHQpfXJldHVybiB1fV9wcmVwYXJlUXVlcnkoZSl7Y29uc3QgdD1bXSxzPVtdO2Zvcihjb25zdFtuLG9db2YgZSl7Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBvZiBvKXRoaXMuX2FkZFRvUXVlcmllc09yQ2FjaGVkUmVzdWx0KG4sdC50YXJnZXQsZSxzKSxcImVkZ2VcIj09PXQudHlwZSYmKHRoaXMuX2FkZFRvUXVlcmllc09yQ2FjaGVkUmVzdWx0KG4sdC5zdGFydCxlLHMpLHRoaXMuX2FkZFRvUXVlcmllc09yQ2FjaGVkUmVzdWx0KG4sdC5lbmQsZSxzKSk7MCE9PWUubGVuZ3RoJiZ0LnB1c2goe29iamVjdElkOm4scG9pbnRzOmV9KX1yZXR1cm5bdCxzLHRoaXMuX2NhY2hlVmVyc2lvbl19X2FkZFRvUXVlcmllc09yQ2FjaGVkUmVzdWx0KGUsdCxzLG4pe2NvbnN0IG89aChlLHQpLGk9dGhpcy5fYWxpZ25tZW50c0NhY2hlLmdldChvKTtudWxsPT1pP3MucHVzaCh0KTpuLnB1c2gobmV3IGwodCxpKSl9X2FwcGx5Q2FjaGVBbmRSZXNwb25zZShlLHtlbGV2YXRpb25zOnQsZHJhcGVkT2JqZWN0SWRzOnMsZmFpbGVkT2JqZWN0SWRzOm59LG8pe2Zvcihjb25zdCByIG9mIG8pci5hcHBseSgpO2xldCBpPTA7Y29uc3QgYT10aGlzLl9hbGlnbm1lbnRzQ2FjaGU7Zm9yKGNvbnN0e29iamVjdElkOnIscG9pbnRzOmN9b2YgZSl7aWYobi5oYXMocikpe2krPWMubGVuZ3RoO2NvbnRpbnVlfWNvbnN0IGU9IXMuaGFzKHIpO2Zvcihjb25zdCBzIG9mIGMpe2NvbnN0IG49aChyLHMpLG89dFtpKytdO3Muej1vLGUmJmEucHV0KG4sbywxKX19fX1jbGFzcyBse2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wb2ludD1lLHRoaXMuej10fWFwcGx5KCl7dGhpcy5wb2ludC56PXRoaXMuen19ZnVuY3Rpb24gaChlLHt4OnQseTpzLHo6bn0pe3JldHVybmAke2V9LSR7dH0tJHtzfS0ke24/PzB9fWB9ZnVuY3Rpb24gZCgpe3JldHVybltdfWV4cG9ydHtpIGFzIGdldFNuYXBwaW5nQ2FuZGlkYXRlRWxldmF0aW9uQWxpZ25lcn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2NsYXNzIHR7ZmlsdGVyKHQsbil7cmV0dXJuIG59bm90aWZ5RWxldmF0aW9uU291cmNlQ2hhbmdlKCl7fX1jbGFzcyBue2ZpbHRlcih0LG4pe2NvbnN0e3BvaW50OnIsZGlzdGFuY2U6Y309dCx7ejppfT1yO2lmKCEobnVsbCE9aSkpcmV0dXJuIG47aWYoMD09PW4ubGVuZ3RoKXJldHVybiBuO2NvbnN0IG89cyhjKSx1PXRoaXMuX3VwZGF0ZUNhbmRpZGF0ZXNUbzNEKG4scixvKS5maWx0ZXIoZSk7cmV0dXJuIHUuc29ydChhKSx1fV91cGRhdGVDYW5kaWRhdGVzVG8zRCh0LG4sZSl7Zm9yKGNvbnN0IHIgb2YgdClzd2l0Y2goci50eXBlKXtjYXNlXCJlZGdlXCI6YyhyLG4sZSk7Y29udGludWU7Y2FzZVwidmVydGV4XCI6byhyLG4sZSk7Y29udGludWV9cmV0dXJuIHR9fWZ1bmN0aW9uIGUodCl7cmV0dXJuIHQuZGlzdGFuY2U8PTF9ZnVuY3Rpb24gcihlPSExKXtyZXR1cm4gZT9uZXcgbjpuZXcgdH1mdW5jdGlvbiBjKHQsbix7eDplLHk6cix6OmN9KXtjb25zdHtzdGFydDpvLGVuZDpzLHRhcmdldDphfT10O3QuZHJhcGVkfHxpKGEsbixvLHMpO2NvbnN0IHU9KG4ueC1hLngpL2UsZD0obi55LWEueSkvcixmPShuLnotYS56KS9jO3QuZGlzdGFuY2U9TWF0aC5zcXJ0KHUqdStkKmQrZipmKX1mdW5jdGlvbiBpKHQsbixlLHIpe2NvbnN0IGM9ci54LWUueCxpPXIueS1lLnksbz1yLnotZS56LHM9YypjK2kqaStvKm8sYT0obi54LWUueCkqYysobi55LWUueSkqaStvKihuLnotZS56KSx1PU1hdGgubWluKDEsTWF0aC5tYXgoMCxhL3MpKSxkPWUueCtjKnUsZj1lLnkraSp1LHg9ZS56K28qdTt0Lng9ZCx0Lnk9Zix0Lno9eH1mdW5jdGlvbiBvKHQsbix7eDplLHk6cix6OmN9KXtjb25zdHt0YXJnZXQ6aX09dCxvPShuLngtaS54KS9lLHM9KG4ueS1pLnkpL3IsYT0obi56LWkueikvYyx1PU1hdGguc3FydChvKm8rcypzK2EqYSk7dC5kaXN0YW5jZT11fWZ1bmN0aW9uIHModCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/e3g6dCx5OnQsejp0fTp0fWZ1bmN0aW9uIGEodCxuKXtyZXR1cm4gdC5kaXN0YW5jZS1uLmRpc3RhbmNlfWV4cG9ydHtyIGFzIGdldFNuYXBwaW5nQ2FuZGlkYXRlRWxldmF0aW9uRmlsdGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e2Nsb25lIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0e0xSVUNhY2hlIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9MUlVDYWNoZS5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRlZCBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e251bWVyaWNIYXNoIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9zdHJpbmcuanNcIjtmdW5jdGlvbiBuKHQ9ITEsZSl7cmV0dXJuIHQ/bmV3IGkoZSk6bmV3IGN9Y2xhc3MgY3thc3luYyBmZXRjaCgpe3JldHVybltdfW5vdGlmeVN5bWJvbG9neUNoYW5nZSgpe319Y29uc3Qgcj0xMDI0O2NsYXNzIGl7Y29uc3RydWN0b3IodCl7dGhpcy5fZ2V0U3ltYm9sb2d5Q2FuZGlkYXRlcz10LHRoaXMuX2NhbmRpZGF0ZXNDYWNoZT1uZXcgZShyKSx0aGlzLl9jYWNoZVZlcnNpb249MH1hc3luYyBmZXRjaChlLG8pe2lmKDA9PT1lLmxlbmd0aClyZXR1cm5bXTtjb25zdCBuPVtdLGM9W10scj10aGlzLl9jYW5kaWRhdGVzQ2FjaGU7Zm9yKGNvbnN0IHMgb2YgZSl7Y29uc3QgZT1hKHMpLG89ci5nZXQoZSk7aWYobylmb3IoY29uc3QgcyBvZiBvKWMucHVzaCh0KHMpKTtlbHNlIG4ucHVzaChzKSxyLnB1dChlLFtdLDEpfWlmKDA9PT1uLmxlbmd0aClyZXR1cm4gYztjb25zdCBpPXRoaXMuX2NhY2hlVmVyc2lvbix7Y2FuZGlkYXRlczpoLHNvdXJjZUNhbmRpZGF0ZUluZGljZXM6ZH09YXdhaXQgdGhpcy5fZ2V0U3ltYm9sb2d5Q2FuZGlkYXRlcyhuLG8pO3Mobyk7aWYoaSE9PXRoaXMuX2NhY2hlVmVyc2lvbilyZXR1cm4gdGhpcy5mZXRjaChlLG8pO2NvbnN0IGY9W10se2xlbmd0aDpnfT1oO2ZvcihsZXQgcz0wO3M8ZzsrK3Mpe2NvbnN0IGU9aFtzXSxvPWEobltkW3NdXSksYz1yLmdldChvKTtjLnB1c2goZSksci5wdXQobyxjLGMubGVuZ3RoKSxmLnB1c2godChlKSl9cmV0dXJuIGMuY29uY2F0KGYpfW5vdGlmeVN5bWJvbG9neUNoYW5nZSgpe3RoaXMuX2NhbmRpZGF0ZXNDYWNoZS5jbGVhcigpLHRoaXMuX2NhY2hlVmVyc2lvbisrfX1mdW5jdGlvbiBhKHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2VcInZlcnRleFwiOntjb25zdHtvYmplY3RJZDplLHRhcmdldDpzfT10LG49YCR7ZX0tdmVydGV4LSR7cy54fS0ke3MueX0tJHtzLno/PzB9YDtyZXR1cm4gbyhuKS50b1N0cmluZygpfWNhc2VcImVkZ2VcIjp7Y29uc3R7b2JqZWN0SWQ6ZSxzdGFydDpzLGVuZDpufT10LGM9YCR7ZX0tZWRnZS0ke3MueH0tJHtzLnl9LSR7cy56Pz8wfS10by0ke24ueH0tJHtuLnl9LSR7bi56Pz8wfWA7cmV0dXJuIG8oYykudG9TdHJpbmcoKX1kZWZhdWx0OnJldHVyblwiXCJ9fWV4cG9ydHtuIGFzIGdldFN5bWJvbG9neVNuYXBwaW5nQ2FuZGlkYXRlc0ZldGNoZXJ9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9