"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["node_modules_arcgis_core_layers_graphics_sources_WFSSourceWorker_js"],{

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../data/FeatureStore.js */ "./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js");
/* harmony import */ var _data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../data/projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../data/QueryEngine.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js");
/* harmony import */ var _geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./geojson/geojson.js */ "./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js");
/* harmony import */ var _support_sourceUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./support/sourceUtils.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js");
/* harmony import */ var _ogc_wfsUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../ogc/wfsUtils.js */ "./node_modules/@arcgis/core/layers/ogc/wfsUtils.js");
/* harmony import */ var _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class d{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,r=await (0,_ogc_wfsUtils_js__WEBPACK_IMPORTED_MODULE_11__.getFeature)(this._getFeatureUrl??"",this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await (0,_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.validateGeoJSON)(r),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(e);const a=(0,_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.createOptimizedFeatures)(r,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.equals)(this._queryEngine.spatialReference,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.WGS84))for(const s of a)null!=s.geometry&&(s.geometry=(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.convertFromGeometry)((0,_data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.project)((0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.convertToGeometry)(s.geometry,this._queryEngine.geometryType,!1,!1),_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.WGS84,this._queryEngine.spatialReference)));let p=1;for(const s of a){const e={};(0,_support_sourceUtils_js__WEBPACK_IMPORTED_MODULE_10__.mixAttributes)(this._fieldsIndex,e,s.attributes,!0),s.attributes=e,null==s.attributes[t]&&(s.objectId=s.attributes[t]=p++)}return a}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:a,spatialReference:i,fields:n,geometryType:o,featureType:u,objectIdField:h,customParameters:y}=e;this._featureType=u,this._customParameters=y,this._getFeatureUrl=r,this._getFeatureOutputFormat=a,this._fieldsIndex=new _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__["default"](n),await this._checkProjection(i),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),this._queryEngine=new _data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_8__.QueryEngine({fields:n,geometryType:o,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:i,timeInfo:null,featureStore:new _data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_6__["default"]({geometryType:o,hasM:!1,hasZ:!1})});const l=await this._snapshotFeatures(t.signal);return this._queryEngine.featureStore.addMany(l),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.createTask)(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.layers.WFSLayer").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:e}))})),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(e){try{await (0,_data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.checkProjectionSupport)(_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.WGS84,e)}catch{throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("unsupported-projection","Projection not supported",{spatialReference:e})}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createFeatureEditErrorResult": () => (/* binding */ u),
/* harmony export */   "createFeatureEditSuccessResult": () => (/* binding */ c),
/* harmony export */   "loadGeometryEngineForSimplify": () => (/* binding */ y),
/* harmony export */   "mixAttributes": () => (/* binding */ d),
/* harmony export */   "simplify": () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class o{constructor(){this.code=null,this.description=null}}class l{constructor(e){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function u(e){return new l(e)}class a{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new a(e)}const f=new Set;function d(e,i,r,s=!1,o){f.clear();for(const l in r){const a=e.get(l);if(!a)continue;const c=r[l],d=m(a,c);if(d!==c&&o&&o.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:a,originalValue:c,sanitizedValue:d}}),f.add(a.name),a&&(s||a.editable)){const e=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.validateFieldValue)(a,d);if(e)return u((0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.validationErrorToString)(e,a,d));i[a.name]=d}}for(const t of e?.requiredFields??[])if(!f.has(t.name))return u(`missing required field "${t.name}"`);return null}function m(e,t){let n=t;return"string"==typeof t&&(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.isNumericField)(e)?n=parseFloat(t):null!=t&&(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.isStringField)(e)&&"string"!=typeof t&&(n=String(t)),(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.sanitizeNullFieldValue)(n)}let p;function h(t,n){if(!t||!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(n))return t;if("rings"in t||"paths"in t){if(null==p)throw new TypeError("geometry engine not loaded");return p.simplify(n,t)}return t}async function g(){return null==p&&(p=await Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_arcgis_core_chunks_geometryEngineBase_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_geometryEngineJSON_js-_997e1")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../geometry/geometryEngineJSON.js */ "./node_modules/@arcgis/core/geometry/geometryEngineJSON.js"))),p}async function y(t,n){!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(t)||"esriGeometryPolygon"!==n&&"esriGeometryPolyline"!==n||await g()}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvMDhlOWIwZDg3ODA4NmVlNDI4YjMwOWMwMmY4ZDRmYmIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNteUIsUUFBUSxjQUFjLG9GQUFvRixNQUFNLGdCQUFnQiwyQkFBMkIsNkRBQUMsa0ZBQWtGLHNIQUFzSCxFQUFFLE1BQU0sb0VBQUMsSUFBSSxxRUFBQyxJQUFJLFFBQVEsNEVBQUMsSUFBSSxvRUFBb0UsRUFBRSxJQUFJLGtGQUFDLG9DQUFvQyw2RUFBQyxpREFBaUQsK0VBQUMsQ0FBQyxtRUFBQyxDQUFDLDZFQUFDLGtEQUFrRCw2RUFBQyx1Q0FBdUMsUUFBUSxrQkFBa0IsV0FBVyx1RUFBQyw2R0FBNkcsVUFBVSxVQUFVLG9EQUFvRCxnQkFBZ0IsTUFBTSxxSUFBcUksR0FBRyx3SEFBd0gsZ0VBQUMsbUNBQW1DLHFFQUFDLDBCQUEwQiw2REFBQyxFQUFFLDBHQUEwRyw2REFBQyxFQUFFLCtCQUErQixFQUFFLEVBQUUsK0NBQStDLGtEQUFrRCxzRUFBc0UsbUJBQW1CLFVBQVUsc0RBQUMsaUZBQWlGLHdCQUF3QixLQUFLLEVBQUUscUZBQXFGLDRCQUE0QixLQUFLLEVBQUUsNkZBQTZGLHlCQUF5QixLQUFLLEVBQUUsMkZBQTJGLHNCQUFzQixLQUFLLEVBQUUsOEZBQThGLDBCQUEwQixFQUFFLGdHQUFnRyxpQkFBaUIsK0VBQStFLCtEQUFDLDhEQUE4RCxvRkFBb0YsT0FBTyx1Q0FBdUMsbUVBQUMsS0FBSyxpRUFBVyxtQ0FBbUMsc0RBQUMsaUZBQWlGLFFBQVEsR0FBRyx1Q0FBdUMsc0VBQXNFLDhCQUE4QixxREFBcUQsSUFBSSxpQ0FBaUMsT0FBTyxxQ0FBcUMsMEJBQTBCLElBQUksTUFBTSxrRkFBQyxDQUFDLDZFQUFDLElBQUksTUFBTSxVQUFVLHNEQUFDLHNEQUFzRCxtQkFBbUIsSUFBeUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p0MEg7QUFDQTtBQUNBO0FBQ0E7QUFDb1AsUUFBUSxjQUFjLHNDQUFzQyxRQUFRLGVBQWUsb0hBQW9ILGNBQWMsZ0JBQWdCLFFBQVEsZUFBZSxrRUFBa0UsY0FBYyxnQkFBZ0IsZ0JBQWdCLHlCQUF5QixVQUFVLGtCQUFrQixpQkFBaUIsZUFBZSxzQkFBc0IscUJBQXFCLG1HQUFtRywwQ0FBMEMsb0NBQW9DLFFBQVEsMEVBQUMsTUFBTSxjQUFjLCtFQUFDLFNBQVMsYUFBYSwyRkFBMkYsT0FBTyxJQUFJLFlBQVksZ0JBQWdCLFFBQVEsMEJBQTBCLHNFQUFDLDZCQUE2QixxRUFBQyx1Q0FBdUMsOEVBQUMsSUFBSSxNQUFNLGdCQUFnQixRQUFRLG1GQUFDLGFBQWEsNkJBQTZCLDZEQUE2RCx1QkFBdUIsU0FBUyxtQkFBbUIseUJBQXlCLGlYQUFvRCxJQUFJLHNCQUFzQixDQUFDLG1GQUFDLHNFQUF3TiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9zb3VyY2VzL1dGU1NvdXJjZVdvcmtlci5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3Mvc291cmNlcy9zdXBwb3J0L3NvdXJjZVV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Y3JlYXRlVGFzayBhcyBlfWZyb21cIi4uLy4uLy4uL2NvcmUvYXN5bmNVdGlscy5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRlZCBhcyBzLGlzQWJvcnRFcnJvciBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e2VxdWFscyBhcyBpLFdHUzg0IGFzIG59ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnR7Y29udmVydEZyb21HZW9tZXRyeSBhcyBvLGNvbnZlcnRUb0dlb21ldHJ5IGFzIHV9ZnJvbVwiLi4vZmVhdHVyZUNvbnZlcnNpb25VdGlscy5qc1wiO2ltcG9ydCBwIGZyb21cIi4uL2RhdGEvRmVhdHVyZVN0b3JlLmpzXCI7aW1wb3J0e3Byb2plY3QgYXMgaCxjaGVja1Byb2plY3Rpb25TdXBwb3J0IGFzIHl9ZnJvbVwiLi4vZGF0YS9wcm9qZWN0aW9uU3VwcG9ydC5qc1wiO2ltcG9ydHtRdWVyeUVuZ2luZSBhcyBjfWZyb21cIi4uL2RhdGEvUXVlcnlFbmdpbmUuanNcIjtpbXBvcnR7dmFsaWRhdGVHZW9KU09OIGFzIGwsY3JlYXRlT3B0aW1pemVkRmVhdHVyZXMgYXMgbX1mcm9tXCIuL2dlb2pzb24vZ2VvanNvbi5qc1wiO2ltcG9ydHttaXhBdHRyaWJ1dGVzIGFzIGd9ZnJvbVwiLi9zdXBwb3J0L3NvdXJjZVV0aWxzLmpzXCI7aW1wb3J0e2dldEZlYXR1cmUgYXMgX31mcm9tXCIuLi8uLi9vZ2Mvd2ZzVXRpbHMuanNcIjtpbXBvcnQgZiBmcm9tXCIuLi8uLi9zdXBwb3J0L0ZpZWxkc0luZGV4LmpzXCI7Y2xhc3MgZHtjb25zdHJ1Y3Rvcigpe3RoaXMuX3F1ZXJ5RW5naW5lPW51bGwsdGhpcy5fY3VzdG9tUGFyYW1ldGVycz1udWxsLHRoaXMuX3NuYXBzaG90RmVhdHVyZXM9YXN5bmMgZT0+e2NvbnN0e29iamVjdElkRmllbGQ6dH09dGhpcy5fcXVlcnlFbmdpbmUscj1hd2FpdCBfKHRoaXMuX2dldEZlYXR1cmVVcmw/P1wiXCIsdGhpcy5fZmVhdHVyZVR5cGUudHlwZU5hbWUsdGhpcy5fZ2V0RmVhdHVyZU91dHB1dEZvcm1hdCx7Y3VzdG9tUGFyYW1ldGVyczp0aGlzLl9jdXN0b21QYXJhbWV0ZXJzLGRhdGVGaWVsZHM6dGhpcy5fcXVlcnlFbmdpbmUuZmllbGRzSW5kZXguZGF0ZUZpZWxkcy5tYXAoKGU9PmUubmFtZSkpLHNpZ25hbDplfSk7YXdhaXQgbChyKSxzKGUpO2NvbnN0IGE9bShyLHtnZW9tZXRyeVR5cGU6dGhpcy5fcXVlcnlFbmdpbmUuZ2VvbWV0cnlUeXBlLGhhc1o6ITEsb2JqZWN0SWRGaWVsZDp0fSk7aWYoIWkodGhpcy5fcXVlcnlFbmdpbmUuc3BhdGlhbFJlZmVyZW5jZSxuKSlmb3IoY29uc3QgcyBvZiBhKW51bGwhPXMuZ2VvbWV0cnkmJihzLmdlb21ldHJ5PW8oaCh1KHMuZ2VvbWV0cnksdGhpcy5fcXVlcnlFbmdpbmUuZ2VvbWV0cnlUeXBlLCExLCExKSxuLHRoaXMuX3F1ZXJ5RW5naW5lLnNwYXRpYWxSZWZlcmVuY2UpKSk7bGV0IHA9MTtmb3IoY29uc3QgcyBvZiBhKXtjb25zdCBlPXt9O2codGhpcy5fZmllbGRzSW5kZXgsZSxzLmF0dHJpYnV0ZXMsITApLHMuYXR0cmlidXRlcz1lLG51bGw9PXMuYXR0cmlidXRlc1t0XSYmKHMub2JqZWN0SWQ9cy5hdHRyaWJ1dGVzW3RdPXArKyl9cmV0dXJuIGF9fWRlc3Ryb3koKXt0aGlzLl9xdWVyeUVuZ2luZT8uZGVzdHJveSgpLHRoaXMuX3F1ZXJ5RW5naW5lPW51bGx9YXN5bmMgbG9hZChlLHQpe2NvbnN0e2dldEZlYXR1cmVVcmw6cixnZXRGZWF0dXJlT3V0cHV0Rm9ybWF0OmEsc3BhdGlhbFJlZmVyZW5jZTppLGZpZWxkczpuLGdlb21ldHJ5VHlwZTpvLGZlYXR1cmVUeXBlOnUsb2JqZWN0SWRGaWVsZDpoLGN1c3RvbVBhcmFtZXRlcnM6eX09ZTt0aGlzLl9mZWF0dXJlVHlwZT11LHRoaXMuX2N1c3RvbVBhcmFtZXRlcnM9eSx0aGlzLl9nZXRGZWF0dXJlVXJsPXIsdGhpcy5fZ2V0RmVhdHVyZU91dHB1dEZvcm1hdD1hLHRoaXMuX2ZpZWxkc0luZGV4PW5ldyBmKG4pLGF3YWl0IHRoaXMuX2NoZWNrUHJvamVjdGlvbihpKSxzKHQpLHRoaXMuX3F1ZXJ5RW5naW5lPW5ldyBjKHtmaWVsZHM6bixnZW9tZXRyeVR5cGU6byxoYXNNOiExLGhhc1o6ITEsb2JqZWN0SWRGaWVsZDpoLHNwYXRpYWxSZWZlcmVuY2U6aSx0aW1lSW5mbzpudWxsLGZlYXR1cmVTdG9yZTpuZXcgcCh7Z2VvbWV0cnlUeXBlOm8saGFzTTohMSxoYXNaOiExfSl9KTtjb25zdCBsPWF3YWl0IHRoaXMuX3NuYXBzaG90RmVhdHVyZXModC5zaWduYWwpO3JldHVybiB0aGlzLl9xdWVyeUVuZ2luZS5mZWF0dXJlU3RvcmUuYWRkTWFueShsKSx7ZXh0ZW50Oihhd2FpdCB0aGlzLl9xdWVyeUVuZ2luZS5mZXRjaFJlY29tcHV0ZWRFeHRlbnRzKCkpLmZ1bGxFeHRlbnR9fWFzeW5jIGFwcGx5RWRpdHMoKXt0aHJvdyBuZXcgdChcIndmcy1zb3VyY2U6ZWRpdGluZy1ub3Qtc3VwcG9ydGVkXCIsXCJhcHBseUVkaXRzKCkgaXMgbm90IHN1cHBvcnRlZCBvbiBXRlNMYXllclwiKX1hc3luYyBxdWVyeUZlYXR1cmVzKGU9e30sdD17fSl7cmV0dXJuIGF3YWl0IHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCksdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5KGUsdC5zaWduYWwpfWFzeW5jIHF1ZXJ5RmVhdHVyZUNvdW50KGU9e30sdD17fSl7cmV0dXJuIGF3YWl0IHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCksdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9yQ291bnQoZSx0LnNpZ25hbCl9YXN5bmMgcXVlcnlPYmplY3RJZHMoZT17fSx0PXt9KXtyZXR1cm4gYXdhaXQgdGhpcy5fd2FpdFNuYXBzaG90Q29tcGxldGUoKSx0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnlGb3JJZHMoZSx0LnNpZ25hbCl9YXN5bmMgcXVlcnlFeHRlbnQoZT17fSx0PXt9KXtyZXR1cm4gYXdhaXQgdGhpcy5fd2FpdFNuYXBzaG90Q29tcGxldGUoKSx0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnlGb3JFeHRlbnQoZSx0LnNpZ25hbCl9YXN5bmMgcXVlcnlTbmFwcGluZyhlLHQ9e30pe3JldHVybiBhd2FpdCB0aGlzLl93YWl0U25hcHNob3RDb21wbGV0ZSgpLHRoaXMuX3F1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeUZvclNuYXBwaW5nKGUsdC5zaWduYWwpfWFzeW5jIHJlZnJlc2gocyl7cmV0dXJuIHRoaXMuX2N1c3RvbVBhcmFtZXRlcnM9cyx0aGlzLl9zbmFwc2hvdFRhc2s/LmFib3J0KCksdGhpcy5fc25hcHNob3RUYXNrPWUodGhpcy5fc25hcHNob3RGZWF0dXJlcyksdGhpcy5fc25hcHNob3RUYXNrLnByb21pc2UudGhlbigoZT0+e3RoaXMuX3F1ZXJ5RW5naW5lLmZlYXR1cmVTdG9yZS5jbGVhcigpLGUmJnRoaXMuX3F1ZXJ5RW5naW5lLmZlYXR1cmVTdG9yZS5hZGRNYW55KGUpfSksKGU9Pnt0aGlzLl9xdWVyeUVuZ2luZS5mZWF0dXJlU3RvcmUuY2xlYXIoKSxhKGUpfHxyLmdldExvZ2dlcihcImVzcmkubGF5ZXJzLldGU0xheWVyXCIpLmVycm9yKG5ldyB0KFwid2ZzLWxheWVyOmdldGZlYXR1cmUtZXJyb3JcIixcIkFuIGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgR2V0RmVhdHVyZSByZXF1ZXN0XCIse2Vycm9yOmV9KSl9KSksYXdhaXQgdGhpcy5fd2FpdFNuYXBzaG90Q29tcGxldGUoKSx7ZXh0ZW50Oihhd2FpdCB0aGlzLl9xdWVyeUVuZ2luZS5mZXRjaFJlY29tcHV0ZWRFeHRlbnRzKCkpLmZ1bGxFeHRlbnR9fWFzeW5jIF93YWl0U25hcHNob3RDb21wbGV0ZSgpe2lmKHRoaXMuX3NuYXBzaG90VGFzayYmIXRoaXMuX3NuYXBzaG90VGFzay5maW5pc2hlZCl7dHJ5e2F3YWl0IHRoaXMuX3NuYXBzaG90VGFzay5wcm9taXNlfWNhdGNoe31yZXR1cm4gdGhpcy5fd2FpdFNuYXBzaG90Q29tcGxldGUoKX19YXN5bmMgX2NoZWNrUHJvamVjdGlvbihlKXt0cnl7YXdhaXQgeShuLGUpfWNhdGNoe3Rocm93IG5ldyB0KFwidW5zdXBwb3J0ZWQtcHJvamVjdGlvblwiLFwiUHJvamVjdGlvbiBub3Qgc3VwcG9ydGVkXCIse3NwYXRpYWxSZWZlcmVuY2U6ZX0pfX19ZXhwb3J0e2QgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2lzVmFsaWQgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3NwYXRpYWxSZWZlcmVuY2VVdGlscy5qc1wiO2ltcG9ydHt2YWxpZGF0ZUZpZWxkVmFsdWUgYXMgdCx2YWxpZGF0aW9uRXJyb3JUb1N0cmluZyBhcyBuLGlzTnVtZXJpY0ZpZWxkIGFzIGksaXNTdHJpbmdGaWVsZCBhcyByLHNhbml0aXplTnVsbEZpZWxkVmFsdWUgYXMgc31mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2ZpZWxkVXRpbHMuanNcIjtjbGFzcyBve2NvbnN0cnVjdG9yKCl7dGhpcy5jb2RlPW51bGwsdGhpcy5kZXNjcmlwdGlvbj1udWxsfX1jbGFzcyBse2NvbnN0cnVjdG9yKGUpe3RoaXMuZXJyb3I9bmV3IG8sdGhpcy5nbG9iYWxJZD1udWxsLHRoaXMub2JqZWN0SWQ9bnVsbCx0aGlzLnN1Y2Nlc3M9ITEsdGhpcy51bmlxdWVJZD1udWxsLHRoaXMuZXJyb3IuZGVzY3JpcHRpb249ZX19ZnVuY3Rpb24gdShlKXtyZXR1cm4gbmV3IGwoZSl9Y2xhc3MgYXtjb25zdHJ1Y3RvcihlKXt0aGlzLmdsb2JhbElkPW51bGwsdGhpcy5zdWNjZXNzPSEwLHRoaXMub2JqZWN0SWQ9dGhpcy51bmlxdWVJZD1lfX1mdW5jdGlvbiBjKGUpe3JldHVybiBuZXcgYShlKX1jb25zdCBmPW5ldyBTZXQ7ZnVuY3Rpb24gZChlLGkscixzPSExLG8pe2YuY2xlYXIoKTtmb3IoY29uc3QgbCBpbiByKXtjb25zdCBhPWUuZ2V0KGwpO2lmKCFhKWNvbnRpbnVlO2NvbnN0IGM9cltsXSxkPW0oYSxjKTtpZihkIT09YyYmbyYmby5wdXNoKHtuYW1lOlwiaW52YWxpZC12YWx1ZS10eXBlXCIsbWVzc2FnZTpcImF0dHJpYnV0ZSB2YWx1ZSB3YXMgY29udmVydGVkIHRvIG1hdGNoIHRoZSBmaWVsZCB0eXBlXCIsZGV0YWlsczp7ZmllbGQ6YSxvcmlnaW5hbFZhbHVlOmMsc2FuaXRpemVkVmFsdWU6ZH19KSxmLmFkZChhLm5hbWUpLGEmJihzfHxhLmVkaXRhYmxlKSl7Y29uc3QgZT10KGEsZCk7aWYoZSlyZXR1cm4gdShuKGUsYSxkKSk7aVthLm5hbWVdPWR9fWZvcihjb25zdCB0IG9mIGU/LnJlcXVpcmVkRmllbGRzPz9bXSlpZighZi5oYXModC5uYW1lKSlyZXR1cm4gdShgbWlzc2luZyByZXF1aXJlZCBmaWVsZCBcIiR7dC5uYW1lfVwiYCk7cmV0dXJuIG51bGx9ZnVuY3Rpb24gbShlLHQpe2xldCBuPXQ7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJmkoZSk/bj1wYXJzZUZsb2F0KHQpOm51bGwhPXQmJnIoZSkmJlwic3RyaW5nXCIhPXR5cGVvZiB0JiYobj1TdHJpbmcodCkpLHMobil9bGV0IHA7ZnVuY3Rpb24gaCh0LG4pe2lmKCF0fHwhZShuKSlyZXR1cm4gdDtpZihcInJpbmdzXCJpbiB0fHxcInBhdGhzXCJpbiB0KXtpZihudWxsPT1wKXRocm93IG5ldyBUeXBlRXJyb3IoXCJnZW9tZXRyeSBlbmdpbmUgbm90IGxvYWRlZFwiKTtyZXR1cm4gcC5zaW1wbGlmeShuLHQpfXJldHVybiB0fWFzeW5jIGZ1bmN0aW9uIGcoKXtyZXR1cm4gbnVsbD09cCYmKHA9YXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvZ2VvbWV0cnlFbmdpbmVKU09OLmpzXCIpKSxwfWFzeW5jIGZ1bmN0aW9uIHkodCxuKXshZSh0KXx8XCJlc3JpR2VvbWV0cnlQb2x5Z29uXCIhPT1uJiZcImVzcmlHZW9tZXRyeVBvbHlsaW5lXCIhPT1ufHxhd2FpdCBnKCl9ZXhwb3J0e3UgYXMgY3JlYXRlRmVhdHVyZUVkaXRFcnJvclJlc3VsdCxjIGFzIGNyZWF0ZUZlYXR1cmVFZGl0U3VjY2Vzc1Jlc3VsdCx5IGFzIGxvYWRHZW9tZXRyeUVuZ2luZUZvclNpbXBsaWZ5LGQgYXMgbWl4QXR0cmlidXRlcyxoIGFzIHNpbXBsaWZ5fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==